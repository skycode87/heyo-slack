{"ast":null,"code":"var _jsxFileName = \"/Users/kometsales/Documents/heyo-slack/src/features/trans/components/ManageTransModal.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport debounce from \"lodash/debounce\";\nimport { Form, Row, Col, Input, Select, Spin, DatePicker, Switch, Typography, Descriptions } from \"antd\";\nimport { saveTrans } from \"../requests\";\nimport { getApp } from \"../../apps/requests\";\nimport showGlobalNotification from \"../../../helpers/showGlobalNotification\";\nimport BaseModal from \"../../shared/components/Modal/BaseModal\";\nimport SelectApps from \"../../apps/components/SelectApps\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst moment = require(\"moment\");\n\nconst {\n  TextArea\n} = Input;\nconst {\n  Title,\n  Link\n} = Typography;\nconst {\n  Option\n} = Select;\n\nconst ManageTransModal = ({\n  getTrans,\n  transId,\n  openModal,\n  closeModal,\n  refetch,\n  initialValues,\n  setSelectedTransMain,\n  selectedApp,\n  selectedTransMain\n}) => {\n  _s();\n\n  var _selectedApp$planId, _selectedApp$planId2, _selectedApp$planId3, _selectedApp$planId4, _selectedTrans$planId, _selectedTrans$planId2, _selectedTrans$planId3, _selectedTrans$planId4;\n\n  const [selectedTrans, setSelectedTrans] = useState(initialValues);\n  const [form] = Form.useForm();\n  const [requestData, setRequestData] = useState({});\n  const [isEdit, setIsEdit] = useState(false);\n  const [loaderForm, setLoaderForm] = useState(false);\n  const sessionStoreRedux = useSelector(store => store.session);\n  useEffect(() => {\n    if (transId) {\n      setLoaderForm(true); // eslint-disable-next-line no-unused-expressions\n\n      !selectedApp && getTrans(transId, {\n        onSuccess: response => {\n          setSelectedTrans(response.result);\n          setLoaderForm(false);\n        },\n        onError: () => showGlobalNotification(\"error\", \"Error\", \"error\")\n      });\n    } else {\n      setSelectedTrans(initialValues);\n    }\n  }, [transId]);\n  useEffect(() => {\n    form.setFieldsValue(initialValues);\n\n    if (selectedApp && (selectedApp === null || selectedApp === void 0 ? void 0 : selectedApp._id)) {\n      setLoaderForm(true);\n      getApp(selectedApp._id, {\n        onSuccess: response => {\n          setSelectedTrans({ ...selectedTrans,\n            appId: selectedApp._id,\n            app: response.result,\n            total: response.result.amount,\n            amount: response.result.amount,\n            fullname: `${response.result.userId.firstname} ${response.result.userId.lastname}`,\n            email: `${response.result.userId.email}`,\n            phone: `${response.result.userId.phone}`,\n            pending: 0\n          });\n          setLoaderForm(false);\n        },\n        onError: () => showGlobalNotification(\"error\", \"Error\", \"error\")\n      });\n    }\n  }, [openModal]);\n  useEffect(() => {\n    if (requestData.message) {\n      closeModal();\n      showGlobalNotification(\"success\", \"Exitooo\", requestData.message);\n      if (!transId) setSelectedTrans(initialValues);\n      refetch();\n    }\n  }, [requestData]);\n  useEffect(() => {\n    form.setFieldsValue(selectedTrans);\n  }, [form, selectedTrans]);\n  useEffect(() => {\n    setSelectedTrans(selectedTransMain);\n    setIsEdit(true);\n  }, [transId]);\n\n  const handleCloseModal = () => {\n    refetch();\n    closeModal();\n  };\n\n  useEffect(() => {\n    console.log(selectedApp);\n  }, [selectedApp]);\n  useEffect(() => {\n    console.log(selectedTrans);\n  }, [selectedTrans]);\n\n  const onFinish = values => {\n    var _selectedTrans$app, _selectedTrans$app2;\n\n    const data = { ...selectedTrans,\n      ...values\n    };\n    console.log(selectedTrans);\n    let planId = null;\n\n    if ((_selectedTrans$app = selectedTrans.app) === null || _selectedTrans$app === void 0 ? void 0 : _selectedTrans$app.planId) {\n      var _selectedTrans$app$pl;\n\n      planId = (_selectedTrans$app$pl = selectedTrans.app.planId) === null || _selectedTrans$app$pl === void 0 ? void 0 : _selectedTrans$app$pl._id;\n    } else if (selectedTrans.planId) {\n      var _selectedTrans$app$pl2;\n\n      planId = (_selectedTrans$app$pl2 = selectedTrans.app.planId) === null || _selectedTrans$app$pl2 === void 0 ? void 0 : _selectedTrans$app$pl2._id;\n    }\n\n    let userId = null;\n\n    if ((_selectedTrans$app2 = selectedTrans.app) === null || _selectedTrans$app2 === void 0 ? void 0 : _selectedTrans$app2.userId) {\n      var _selectedTrans$app$us;\n\n      userId = (_selectedTrans$app$us = selectedTrans.app.userId) === null || _selectedTrans$app$us === void 0 ? void 0 : _selectedTrans$app$us._id;\n    } else if (selectedTrans.userId) {\n      var _selectedTrans$app$us2;\n\n      userId = (_selectedTrans$app$us2 = selectedTrans.app.userId) === null || _selectedTrans$app$us2 === void 0 ? void 0 : _selectedTrans$app$us2._id;\n    }\n\n    saveTrans({ ...data,\n      planId,\n      userId,\n      appId: selectedTrans.appId,\n      transId: transId || \"\",\n      rootId: sessionStoreRedux.currentSession_id\n    }, {\n      onSuccess: response => {\n        setRequestData(response);\n        setSelectedTrans(response.result);\n\n        if (transId) {\n          setSelectedTransMain(response.result);\n        }\n\n        showGlobalNotification(\"success\", \"En Horabuena\", \"Registro Exitoso\");\n      },\n      onError: () => showGlobalNotification(\"error\", \"Error\", \"error\"),\n      onFinally: () => handleCloseModal()\n    });\n  };\n\n  const onValuesChange = debounce(values => {\n    if (values === null || values === void 0 ? void 0 : values.amount) {\n      if (parseFloat(values.amount) <= parseFloat(selectedTrans.total)) {\n        setSelectedTrans({ ...selectedTrans,\n          ...values,\n          pending: selectedTrans.total - values.amount\n        });\n      } else {\n        setSelectedTrans({ ...selectedTrans,\n          ...values,\n          amount: selectedTrans.amount\n        });\n      }\n    } else {\n      setSelectedTrans({ ...selectedTrans,\n        ...values\n      });\n    }\n  }, 500);\n\n  const handleSubmit = () => {\n    form.validateFields().then(() => {\n      form.submit();\n    });\n  };\n\n  const handleApp = appId => {\n    setLoaderForm(true);\n    getApp(appId, {\n      onSuccess: response => {\n        setSelectedTrans({ ...selectedTrans,\n          appId,\n          app: response.result,\n          total: response.result.amount,\n          amount: response.result.amount,\n          fullname: `${response.result.userId.firstname} ${response.result.userId.lastname}`,\n          email: `${response.result.userId.email}`,\n          phone: `${response.result.userId.phone}`,\n          pending: 0\n        });\n        setLoaderForm(false);\n      },\n      onError: () => showGlobalNotification(\"error\", \"Error\", \"error\")\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(BaseModal, {\n    isOpenModal: openModal,\n    closeModal: handleCloseModal,\n    onCancel: handleCloseModal,\n    onConfirm: () => handleSubmit(),\n    title: transId ? \"Editar Trans\" : \"Nuevo Trans\",\n    width: 1000,\n    confirmText: \"Guardar\",\n    isCloseModal: true,\n    top: 70,\n    children: /*#__PURE__*/_jsxDEV(Form, {\n      form: form,\n      name: \"manage-category-form-modal\",\n      initialValues: initialValues,\n      className: \"manage-modal\",\n      onFinish: onFinish,\n      labelCol: {\n        span: 24\n      },\n      onValuesChange: onValuesChange,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"layout-form-modal entity-300 entity-small\",\n        children: loaderForm ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: /*#__PURE__*/_jsxDEV(Spin, {\n            tip: \"Cargando\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 15\n          }, this)\n        }, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [(selectedApp === null || selectedApp === void 0 ? void 0 : selectedApp._id) && /*#__PURE__*/_jsxDEV(Descriptions, {\n            size: \"small\",\n            column: 2,\n            style: {\n              marginBottom: 20\n            },\n            children: [/*#__PURE__*/_jsxDEV(Descriptions.Item, {\n              label: \"Nombre\",\n              children: (_selectedApp$planId = selectedApp.planId) === null || _selectedApp$planId === void 0 ? void 0 : _selectedApp$planId.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Descriptions.Item, {\n              label: \"Duraci\\xF3n\",\n              children: (_selectedApp$planId2 = selectedApp.planId) === null || _selectedApp$planId2 === void 0 ? void 0 : _selectedApp$planId2.duration\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 224,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Descriptions.Item, {\n              label: \"Categor\\xEDa\",\n              children: (_selectedApp$planId3 = selectedApp.planId) === null || _selectedApp$planId3 === void 0 ? void 0 : _selectedApp$planId3.category\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 225,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Descriptions.Item, {\n              label: \"Precio\",\n              children: (_selectedApp$planId4 = selectedApp.planId) === null || _selectedApp$planId4 === void 0 ? void 0 : _selectedApp$planId4.price\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 17\n          }, this), !selectedApp && !selectedTrans && /*#__PURE__*/_jsxDEV(Row, {\n            gutter: 15,\n            style: {\n              paddingBottom: 10\n            },\n            children: /*#__PURE__*/_jsxDEV(Col, {\n              span: 24,\n              children: /*#__PURE__*/_jsxDEV(Form.Item, {\n                name: \"appId2\",\n                tooltip: \"Firstname here pleaseio\",\n                label: \"Nombre del Paquete\",\n                children: /*#__PURE__*/_jsxDEV(SelectApps, {\n                  defaultValue: selectedTrans === null || selectedTrans === void 0 ? void 0 : selectedTrans.appId,\n                  returnData: handleApp\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 234,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 233,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 17\n          }, this), selectedTrans && !selectedApp && /*#__PURE__*/_jsxDEV(Row, {\n            gutter: 15,\n            children: /*#__PURE__*/_jsxDEV(Descriptions, {\n              size: \"small\",\n              column: 2,\n              style: {\n                marginBottom: 20\n              },\n              children: [/*#__PURE__*/_jsxDEV(Descriptions.Item, {\n                label: \"Nombre\",\n                children: (_selectedTrans$planId = selectedTrans.planId) === null || _selectedTrans$planId === void 0 ? void 0 : _selectedTrans$planId.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 242,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Descriptions.Item, {\n                label: \"Duraci\\xF3n\",\n                children: (_selectedTrans$planId2 = selectedTrans.planId) === null || _selectedTrans$planId2 === void 0 ? void 0 : _selectedTrans$planId2.duration\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 243,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Descriptions.Item, {\n                label: \"Categor\\xEDa\",\n                children: (_selectedTrans$planId3 = selectedTrans.planId) === null || _selectedTrans$planId3 === void 0 ? void 0 : _selectedTrans$planId3.category\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 244,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Descriptions.Item, {\n                label: \"Precio\",\n                children: (_selectedTrans$planId4 = selectedTrans.planId) === null || _selectedTrans$planId4 === void 0 ? void 0 : _selectedTrans$planId4.price\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 245,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 241,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Row, {\n            gutter: 15,\n            children: [/*#__PURE__*/_jsxDEV(Col, {\n              span: 7,\n              children: /*#__PURE__*/_jsxDEV(Form.Item, {\n                name: \"mode\",\n                label: \"Modalidad\",\n                children: /*#__PURE__*/_jsxDEV(Select, {\n                  disabled: !!transId,\n                  className: \"select-form-modal\",\n                  children: [/*#__PURE__*/_jsxDEV(Option, {\n                    value: \"Transferencia\",\n                    children: \"Transferencia\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 253,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Option, {\n                    value: \"efectivo\",\n                    children: \"Efectivo\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 254,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Option, {\n                    value: \"Debito\",\n                    children: \"Debito\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 255,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Option, {\n                    value: \"Credito\",\n                    children: \"Credito\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 256,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Option, {\n                    value: \"Otro\",\n                    children: \"Otro\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 257,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 252,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 251,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 250,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              span: 6,\n              children: /*#__PURE__*/_jsxDEV(Form.Item, {\n                name: \"reference\",\n                label: \"Referenc\\xEDa\",\n                children: /*#__PURE__*/_jsxDEV(Input, {\n                  disabled: !!transId,\n                  value: selectedTrans === null || selectedTrans === void 0 ? void 0 : selectedTrans.reference\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 263,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 262,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              span: 11,\n              children: /*#__PURE__*/_jsxDEV(Form.Item, {\n                name: \"description\",\n                label: \"Descripci\\xF3n\",\n                children: /*#__PURE__*/_jsxDEV(Input, {\n                  value: selectedTrans === null || selectedTrans === void 0 ? void 0 : selectedTrans.description\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 268,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 267,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 266,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Row, {\n            gutter: 16,\n            children: [/*#__PURE__*/_jsxDEV(Col, {\n              span: 8,\n              children: /*#__PURE__*/_jsxDEV(Form.Item, {\n                name: \"fullname\",\n                label: \"Nombre Completo\",\n                children: /*#__PURE__*/_jsxDEV(Input, {\n                  disabled: !!transId,\n                  value: selectedTrans === null || selectedTrans === void 0 ? void 0 : selectedTrans.fullname\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 275,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 274,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 273,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              span: 8,\n              children: /*#__PURE__*/_jsxDEV(Form.Item, {\n                name: \"email\",\n                label: \"Email\",\n                children: /*#__PURE__*/_jsxDEV(Input, {\n                  disabled: !!transId,\n                  value: selectedTrans === null || selectedTrans === void 0 ? void 0 : selectedTrans.email\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 280,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 279,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 278,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              span: 8,\n              children: /*#__PURE__*/_jsxDEV(Form.Item, {\n                name: \"phone\",\n                label: \"Tel\\xE9fono\",\n                children: /*#__PURE__*/_jsxDEV(Input, {\n                  disabled: !!transId,\n                  value: selectedTrans === null || selectedTrans === void 0 ? void 0 : selectedTrans.phone\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 285,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 284,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 283,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Row, {\n            gutter: 16,\n            style: {\n              backgroundColor: \"#FFE79F\",\n              paddingTop: 10,\n              marginTop: 10,\n              borderRadius: 5\n            },\n            children: [/*#__PURE__*/_jsxDEV(Col, {\n              span: 8,\n              children: /*#__PURE__*/_jsxDEV(Form.Item, {\n                disabled: !!transId,\n                label: \"Monto a pagar\",\n                name: \"amount\",\n                children: /*#__PURE__*/_jsxDEV(Input, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 292,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 291,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 290,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              span: 8,\n              children: /*#__PURE__*/_jsxDEV(Form.Item, {\n                label: \"Queda debiendo\",\n                name: \"pending\",\n                children: /*#__PURE__*/_jsxDEV(Input, {\n                  disabled: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 297,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 296,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 295,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              span: 8,\n              children: /*#__PURE__*/_jsxDEV(Form.Item, {\n                label: \"Total a Pagar\",\n                name: \"total\",\n                children: /*#__PURE__*/_jsxDEV(Input, {\n                  disabled: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 302,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 301,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 300,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 194,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ManageTransModal, \"UO9hqK30ss/ngjqd/wd4v5WoL4E=\", false, function () {\n  return [Form.useForm, useSelector];\n});\n\n_c = ManageTransModal;\nManageTransModal.defaultProps = {\n  setTransId: () => {}\n};\nexport default ManageTransModal;\n\nvar _c;\n\n$RefreshReg$(_c, \"ManageTransModal\");","map":{"version":3,"sources":["/Users/kometsales/Documents/heyo-slack/src/features/trans/components/ManageTransModal.js"],"names":["useState","useEffect","useSelector","debounce","Form","Row","Col","Input","Select","Spin","DatePicker","Switch","Typography","Descriptions","saveTrans","getApp","showGlobalNotification","BaseModal","SelectApps","moment","require","TextArea","Title","Link","Option","ManageTransModal","getTrans","transId","openModal","closeModal","refetch","initialValues","setSelectedTransMain","selectedApp","selectedTransMain","selectedTrans","setSelectedTrans","form","useForm","requestData","setRequestData","isEdit","setIsEdit","loaderForm","setLoaderForm","sessionStoreRedux","store","session","onSuccess","response","result","onError","setFieldsValue","_id","appId","app","total","amount","fullname","userId","firstname","lastname","email","phone","pending","message","handleCloseModal","console","log","onFinish","values","data","planId","rootId","currentSession_id","onFinally","onValuesChange","parseFloat","handleSubmit","validateFields","then","submit","handleApp","span","marginBottom","name","duration","category","price","paddingBottom","reference","description","backgroundColor","paddingTop","marginTop","borderRadius","defaultProps","setTransId"],"mappings":"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","sourcesContent":["import { useState, useEffect } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport debounce from \"lodash/debounce\";\n\nimport { Form, Row, Col, Input, Select, Spin, DatePicker, Switch, Typography, Descriptions } from \"antd\";\nimport { saveTrans } from \"../requests\";\nimport { getApp } from \"../../apps/requests\";\n\nimport showGlobalNotification from \"../../../helpers/showGlobalNotification\";\nimport BaseModal from \"../../shared/components/Modal/BaseModal\";\nimport SelectApps from \"../../apps/components/SelectApps\";\n\nconst moment = require(\"moment\");\n\nconst { TextArea } = Input;\n\nconst { Title, Link } = Typography;\n\nconst { Option } = Select;\n\nconst ManageTransModal = ({\n  getTrans,\n  transId,\n  openModal,\n  closeModal,\n  refetch,\n  initialValues,\n  setSelectedTransMain,\n  selectedApp,\n  selectedTransMain,\n}) => {\n  const [selectedTrans, setSelectedTrans] = useState(initialValues);\n  const [form] = Form.useForm();\n  const [requestData, setRequestData] = useState({});\n  const [isEdit, setIsEdit] = useState(false);\n  const [loaderForm, setLoaderForm] = useState(false);\n  const sessionStoreRedux = useSelector((store) => store.session);\n\n  useEffect(() => {\n    if (transId) {\n      setLoaderForm(true);\n      // eslint-disable-next-line no-unused-expressions\n      !selectedApp &&\n        getTrans(transId, {\n          onSuccess: (response) => {\n            setSelectedTrans(response.result);\n            setLoaderForm(false);\n          },\n          onError: () => showGlobalNotification(\"error\", \"Error\", \"error\"),\n        });\n    } else {\n      setSelectedTrans(initialValues);\n    }\n  }, [transId]);\n\n  useEffect(() => {\n    form.setFieldsValue(initialValues);\n    if (selectedApp && selectedApp?._id) {\n      setLoaderForm(true);\n      getApp(selectedApp._id, {\n        onSuccess: (response) => {\n          setSelectedTrans({\n            ...selectedTrans,\n            appId: selectedApp._id,\n            app: response.result,\n            total: response.result.amount,\n            amount: response.result.amount,\n            fullname: `${response.result.userId.firstname} ${response.result.userId.lastname}`,\n            email: `${response.result.userId.email}`,\n            phone: `${response.result.userId.phone}`,\n            pending: 0,\n          });\n          setLoaderForm(false);\n        },\n        onError: () => showGlobalNotification(\"error\", \"Error\", \"error\"),\n      });\n    }\n  }, [openModal]);\n\n  useEffect(() => {\n    if (requestData.message) {\n      closeModal();\n      showGlobalNotification(\"success\", \"Exitooo\", requestData.message);\n      if (!transId) setSelectedTrans(initialValues);\n      refetch();\n    }\n  }, [requestData]);\n\n  useEffect(() => {\n    form.setFieldsValue(selectedTrans);\n  }, [form, selectedTrans]);\n\n  useEffect(() => {\n    setSelectedTrans(selectedTransMain);\n    setIsEdit(true);\n  }, [transId]);\n\n  const handleCloseModal = () => {\n    refetch();\n    closeModal();\n  };\n\n  useEffect(() => {\n    console.log(selectedApp);\n  }, [selectedApp]);\n\n  useEffect(() => {\n    console.log(selectedTrans);\n  }, [selectedTrans]);\n\n  const onFinish = (values) => {\n    const data = { ...selectedTrans, ...values };\n\n    console.log(selectedTrans);\n\n    let planId = null;\n    if (selectedTrans.app?.planId) {\n      planId = selectedTrans.app.planId?._id;\n    } else if (selectedTrans.planId) {\n      planId = selectedTrans.app.planId?._id;\n    }\n\n    let userId = null;\n    if (selectedTrans.app?.userId) {\n      userId = selectedTrans.app.userId?._id;\n    } else if (selectedTrans.userId) {\n      userId = selectedTrans.app.userId?._id;\n    }\n\n    saveTrans(\n      {\n        ...data,\n        planId,\n        userId,\n        appId: selectedTrans.appId,\n        transId: transId || \"\",\n        rootId: sessionStoreRedux.currentSession_id,\n      },\n      {\n        onSuccess: (response) => {\n          setRequestData(response);\n          setSelectedTrans(response.result);\n          if (transId) {\n            setSelectedTransMain(response.result);\n          }\n          showGlobalNotification(\"success\", \"En Horabuena\", \"Registro Exitoso\");\n        },\n        onError: () => showGlobalNotification(\"error\", \"Error\", \"error\"),\n        onFinally: () => handleCloseModal(),\n      }\n    );\n  };\n\n  const onValuesChange = debounce((values) => {\n    if (values?.amount) {\n      if (parseFloat(values.amount) <= parseFloat(selectedTrans.total)) {\n        setSelectedTrans({ ...selectedTrans, ...values, pending: selectedTrans.total - values.amount });\n      } else {\n        setSelectedTrans({ ...selectedTrans, ...values, amount: selectedTrans.amount });\n      }\n    } else {\n      setSelectedTrans({ ...selectedTrans, ...values });\n    }\n  }, 500);\n\n  const handleSubmit = () => {\n    form.validateFields().then(() => {\n      form.submit();\n    });\n  };\n\n  const handleApp = (appId) => {\n    setLoaderForm(true);\n    getApp(appId, {\n      onSuccess: (response) => {\n        setSelectedTrans({\n          ...selectedTrans,\n          appId,\n          app: response.result,\n          total: response.result.amount,\n          amount: response.result.amount,\n          fullname: `${response.result.userId.firstname} ${response.result.userId.lastname}`,\n          email: `${response.result.userId.email}`,\n          phone: `${response.result.userId.phone}`,\n          pending: 0,\n        });\n        setLoaderForm(false);\n      },\n      onError: () => showGlobalNotification(\"error\", \"Error\", \"error\"),\n    });\n  };\n\n  return (\n    <BaseModal\n      isOpenModal={openModal}\n      closeModal={handleCloseModal}\n      onCancel={handleCloseModal}\n      onConfirm={() => handleSubmit()}\n      title={transId ? \"Editar Trans\" : \"Nuevo Trans\"}\n      width={1000}\n      confirmText=\"Guardar\"\n      isCloseModal\n      top={70}\n    >\n      <Form\n        form={form}\n        name=\"manage-category-form-modal\"\n        initialValues={initialValues}\n        className=\"manage-modal\"\n        onFinish={onFinish}\n        labelCol={{ span: 24 }}\n        onValuesChange={onValuesChange}\n      >\n        <div className=\"layout-form-modal entity-300 entity-small\">\n          {loaderForm ? (\n            <>\n              <Spin tip=\"Cargando\" />\n            </>\n          ) : (\n            <>\n              {selectedApp?._id && (\n                <Descriptions size=\"small\" column={2} style={{ marginBottom: 20 }}>\n                  <Descriptions.Item label=\"Nombre\">{selectedApp.planId?.name}</Descriptions.Item>\n                  <Descriptions.Item label=\"Duración\">{selectedApp.planId?.duration}</Descriptions.Item>\n                  <Descriptions.Item label=\"Categoría\">{selectedApp.planId?.category}</Descriptions.Item>\n                  <Descriptions.Item label=\"Precio\">{selectedApp.planId?.price}</Descriptions.Item>\n                </Descriptions>\n              )}\n\n              {!selectedApp && !selectedTrans && (\n                <Row gutter={15} style={{ paddingBottom: 10 }}>\n                  <Col span={24}>\n                    <Form.Item name=\"appId2\" tooltip=\"Firstname here pleaseio\" label=\"Nombre del Paquete\">\n                      <SelectApps defaultValue={selectedTrans?.appId} returnData={handleApp} />\n                    </Form.Item>\n                  </Col>\n                </Row>\n              )}\n              {selectedTrans && !selectedApp && (\n                <Row gutter={15}>\n                  <Descriptions size=\"small\" column={2} style={{ marginBottom: 20 }}>\n                    <Descriptions.Item label=\"Nombre\">{selectedTrans.planId?.name}</Descriptions.Item>\n                    <Descriptions.Item label=\"Duración\">{selectedTrans.planId?.duration}</Descriptions.Item>\n                    <Descriptions.Item label=\"Categoría\">{selectedTrans.planId?.category}</Descriptions.Item>\n                    <Descriptions.Item label=\"Precio\">{selectedTrans.planId?.price}</Descriptions.Item>\n                  </Descriptions>\n                </Row>\n              )}\n              <Row gutter={15}>\n                <Col span={7}>\n                  <Form.Item name=\"mode\" label=\"Modalidad\">\n                    <Select disabled={!!transId} className=\"select-form-modal\">\n                      <Option value=\"Transferencia\">Transferencia</Option>\n                      <Option value=\"efectivo\">Efectivo</Option>\n                      <Option value=\"Debito\">Debito</Option>\n                      <Option value=\"Credito\">Credito</Option>\n                      <Option value=\"Otro\">Otro</Option>\n                    </Select>\n                  </Form.Item>\n                </Col>\n                <Col span={6}>\n                  <Form.Item name=\"reference\" label=\"Referencía\">\n                    <Input disabled={!!transId} value={selectedTrans?.reference} />\n                  </Form.Item>\n                </Col>\n                <Col span={11}>\n                  <Form.Item name=\"description\" label=\"Descripción\">\n                    <Input value={selectedTrans?.description} />\n                  </Form.Item>\n                </Col>\n              </Row>\n              <Row gutter={16}>\n                <Col span={8}>\n                  <Form.Item name=\"fullname\" label=\"Nombre Completo\">\n                    <Input disabled={!!transId} value={selectedTrans?.fullname} />\n                  </Form.Item>\n                </Col>\n                <Col span={8}>\n                  <Form.Item name=\"email\" label=\"Email\">\n                    <Input disabled={!!transId} value={selectedTrans?.email} />\n                  </Form.Item>\n                </Col>\n                <Col span={8}>\n                  <Form.Item name=\"phone\" label=\"Teléfono\">\n                    <Input disabled={!!transId} value={selectedTrans?.phone} />\n                  </Form.Item>\n                </Col>\n              </Row>\n              <Row gutter={16} style={{ backgroundColor: \"#FFE79F\", paddingTop: 10, marginTop: 10, borderRadius: 5 }}>\n                <Col span={8}>\n                  <Form.Item disabled={!!transId} label=\"Monto a pagar\" name=\"amount\">\n                    <Input />\n                  </Form.Item>\n                </Col>\n                <Col span={8}>\n                  <Form.Item label=\"Queda debiendo\" name=\"pending\">\n                    <Input disabled />\n                  </Form.Item>\n                </Col>\n                <Col span={8}>\n                  <Form.Item label=\"Total a Pagar\" name=\"total\">\n                    <Input disabled />\n                  </Form.Item>\n                </Col>\n              </Row>\n            </>\n          )}\n        </div>\n      </Form>\n    </BaseModal>\n  );\n};\n\nManageTransModal.defaultProps = {\n  setTransId: () => {},\n};\n\nexport default ManageTransModal;\n"]},"metadata":{},"sourceType":"module"}