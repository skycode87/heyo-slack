{"ast":null,"code":"var _jsxFileName = \"/Users/kometsales/Documents/heyo-slack/src/features/trans/components/DetailsTransModal.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport debounce from \"lodash/debounce\";\nimport { Form, Row, Col, Input, Select, Spin, Divider, Switch, Typography, Descriptions } from \"antd\";\nimport { saveTrans } from \"../requests\";\nimport { getApp } from \"../../apps/requests\";\nimport showGlobalNotification from \"../../../helpers/showGlobalNotification\";\nimport BaseModal from \"../../shared/components/Modal/BaseModal\";\nimport SelectApps from \"../../apps/components/SelectApps\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst moment = require(\"moment\");\n\nconst {\n  TextArea\n} = Input;\nconst {\n  Title,\n  Link\n} = Typography;\nconst {\n  Option\n} = Select;\n\nconst ManageTransModal = ({\n  getTrans,\n  transId,\n  openModal,\n  closeModal,\n  refetch,\n  initialValues,\n  setSelectedTransMain,\n  selectedApp,\n  selectedTransMain\n}) => {\n  _s();\n\n  var _selectedTrans$rootId, _selectedTrans$planId, _selectedTrans$planId2, _selectedTrans$planId3;\n\n  const [selectedTrans, setSelectedTrans] = useState(initialValues);\n  const [form] = Form.useForm();\n  const [requestData, setRequestData] = useState({});\n  const [loaderForm, setLoaderForm] = useState(false);\n  const sessionStoreRedux = useSelector(store => store.session);\n  useEffect(() => {\n    if (transId) {\n      setLoaderForm(true); // eslint-disable-next-line no-unused-expressions\n\n      !selectedApp && getTrans(transId, {\n        onSuccess: response => {\n          setSelectedTrans(response.result);\n          setLoaderForm(false);\n        },\n        onError: () => showGlobalNotification(\"error\", \"Error\", \"error\")\n      });\n    } else {\n      setSelectedTrans(initialValues);\n    }\n  }, [transId]);\n  useEffect(() => {\n    form.setFieldsValue(initialValues);\n\n    if (selectedApp && (selectedApp === null || selectedApp === void 0 ? void 0 : selectedApp._id)) {\n      setLoaderForm(true);\n      getApp(selectedApp._id, {\n        onSuccess: response => {\n          setSelectedTrans({ ...selectedTrans,\n            appId: selectedApp._id,\n            app: response.result,\n            total: response.result.amount,\n            amount: response.result.amount,\n            fullname: `${response.result.userId.firstname} ${response.result.userId.lastname}`,\n            email: `${response.result.userId.email}`,\n            phone: `${response.result.userId.phone}`,\n            pending: 0\n          });\n          setLoaderForm(false);\n        },\n        onError: () => showGlobalNotification(\"error\", \"Error\", \"error\")\n      });\n    }\n  }, [openModal]);\n  useEffect(() => {\n    if (requestData.message) {\n      closeModal();\n      showGlobalNotification(\"success\", \"Exitooo\", requestData.message);\n      if (!transId) setSelectedTrans(initialValues);\n      refetch();\n    }\n  }, [requestData]);\n  useEffect(() => {\n    setSelectedTrans(selectedTransMain);\n  }, [selectedTransMain]);\n\n  const handleCloseModal = () => {\n    refetch();\n    closeModal();\n  };\n\n  useEffect(() => {\n    console.log(selectedApp);\n  }, [selectedApp]);\n  useEffect(() => {\n    console.log(selectedTrans);\n  }, [selectedTrans]);\n\n  const handleSubmit = () => {\n    form.validateFields().then(() => {\n      form.submit();\n    });\n  };\n\n  const handleApp = appId => {\n    setLoaderForm(true);\n    getApp(appId, {\n      onSuccess: response => {\n        setSelectedTrans({ ...selectedTrans,\n          appId,\n          app: response.result,\n          total: response.result.amount,\n          amount: response.result.amount,\n          fullname: `${response.result.userId.firstname} ${response.result.userId.lastname}`,\n          email: `${response.result.userId.email}`,\n          phone: `${response.result.userId.phone}`,\n          pending: 0\n        });\n        setLoaderForm(false);\n      },\n      onError: () => showGlobalNotification(\"error\", \"Error\", \"error\")\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(BaseModal, {\n    isOpenModal: openModal,\n    closeModal: handleCloseModal,\n    onCancel: handleCloseModal,\n    onConfirm: handleCloseModal,\n    title: \"M\\xE1s detalles de la transacci\\xF3n\",\n    width: 1000,\n    confirmText: \"\",\n    isCloseModal: true,\n    top: 70,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"layout-form-modal entity-300 entity-small\",\n      children: loaderForm ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(Spin, {\n          tip: \"Cargando\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 13\n        }, this)\n      }, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Row, {\n          gutter: 15,\n          children: [/*#__PURE__*/_jsxDEV(Divider, {\n            orientation: \"left\",\n            children: \"Acerca de la transacci\\xF3n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Descriptions, {\n            size: \"small\",\n            column: 3,\n            style: {\n              marginBottom: 20\n            },\n            children: [/*#__PURE__*/_jsxDEV(Descriptions.Item, {\n              label: \"Descripcion\",\n              children: selectedTrans === null || selectedTrans === void 0 ? void 0 : selectedTrans.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 155,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Descriptions.Item, {\n              label: \"Codigo\",\n              children: selectedTrans === null || selectedTrans === void 0 ? void 0 : selectedTrans.code\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 156,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Descriptions.Item, {\n              label: \"Fecha\",\n              children: selectedTrans === null || selectedTrans === void 0 ? void 0 : selectedTrans.createAt\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 157,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Descriptions.Item, {\n              label: \"Nombre\",\n              children: selectedTrans === null || selectedTrans === void 0 ? void 0 : selectedTrans.fullname\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Descriptions.Item, {\n              label: \"Email\",\n              children: selectedTrans === null || selectedTrans === void 0 ? void 0 : selectedTrans.email\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 159,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Descriptions.Item, {\n              label: \"Phone\",\n              children: selectedTrans === null || selectedTrans === void 0 ? void 0 : selectedTrans.phone\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Descriptions.Item, {\n              label: \"Tipo\",\n              children: selectedTrans === null || selectedTrans === void 0 ? void 0 : selectedTrans.type\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Descriptions.Item, {\n              label: \"Estatus\",\n              children: selectedTrans === null || selectedTrans === void 0 ? void 0 : selectedTrans.status\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Descriptions.Item, {\n              label: \"Realizada por\",\n              children: (_selectedTrans$rootId = selectedTrans.rootId) === null || _selectedTrans$rootId === void 0 ? void 0 : _selectedTrans$rootId.email\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Descriptions, {\n            size: \"small\",\n            column: 3,\n            style: {\n              marginBottom: 20\n            },\n            children: [/*#__PURE__*/_jsxDEV(Descriptions.Item, {\n              label: \"Monto\",\n              children: selectedTrans === null || selectedTrans === void 0 ? void 0 : selectedTrans.amount\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Descriptions.Item, {\n              label: \"Pendiente\",\n              children: selectedTrans === null || selectedTrans === void 0 ? void 0 : selectedTrans.pending\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Descriptions.Item, {\n              label: \"Total\",\n              children: selectedTrans === null || selectedTrans === void 0 ? void 0 : selectedTrans.total\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Row, {\n          gutter: 15,\n          children: [/*#__PURE__*/_jsxDEV(Divider, {\n            orientation: \"left\",\n            children: \"Acerca del Plan\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Descriptions, {\n            size: \"small\",\n            column: 3,\n            style: {\n              marginBottom: 20\n            },\n            children: [/*#__PURE__*/_jsxDEV(Descriptions.Item, {\n              label: \"Plan\",\n              children: (_selectedTrans$planId = selectedTrans.planId) === null || _selectedTrans$planId === void 0 ? void 0 : _selectedTrans$planId.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Descriptions.Item, {\n              label: \"Costo\",\n              children: (_selectedTrans$planId2 = selectedTrans.planId) === null || _selectedTrans$planId2 === void 0 ? void 0 : _selectedTrans$planId2.price\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Descriptions.Item, {\n              label: \"Duraci\\xF3n\",\n              children: (_selectedTrans$planId3 = selectedTrans.planId) === null || _selectedTrans$planId3 === void 0 ? void 0 : _selectedTrans$planId3.duration\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 133,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ManageTransModal, \"YIoYsFvdVLKsnS5q7o2olud+4I4=\", false, function () {\n  return [Form.useForm, useSelector];\n});\n\n_c = ManageTransModal;\nManageTransModal.defaultProps = {\n  setTransId: () => {}\n};\nexport default ManageTransModal;\n\nvar _c;\n\n$RefreshReg$(_c, \"ManageTransModal\");","map":{"version":3,"sources":["/Users/kometsales/Documents/heyo-slack/src/features/trans/components/DetailsTransModal.js"],"names":["useState","useEffect","useSelector","debounce","Form","Row","Col","Input","Select","Spin","Divider","Switch","Typography","Descriptions","saveTrans","getApp","showGlobalNotification","BaseModal","SelectApps","moment","require","TextArea","Title","Link","Option","ManageTransModal","getTrans","transId","openModal","closeModal","refetch","initialValues","setSelectedTransMain","selectedApp","selectedTransMain","selectedTrans","setSelectedTrans","form","useForm","requestData","setRequestData","loaderForm","setLoaderForm","sessionStoreRedux","store","session","onSuccess","response","result","onError","setFieldsValue","_id","appId","app","total","amount","fullname","userId","firstname","lastname","email","phone","pending","message","handleCloseModal","console","log","handleSubmit","validateFields","then","submit","handleApp","marginBottom","description","code","createAt","type","status","rootId","planId","name","price","duration","defaultProps","setTransId"],"mappings":"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","sourcesContent":["import { useState, useEffect } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport debounce from \"lodash/debounce\";\n\nimport { Form, Row, Col, Input, Select, Spin, Divider, Switch, Typography, Descriptions } from \"antd\";\nimport { saveTrans } from \"../requests\";\nimport { getApp } from \"../../apps/requests\";\n\nimport showGlobalNotification from \"../../../helpers/showGlobalNotification\";\nimport BaseModal from \"../../shared/components/Modal/BaseModal\";\nimport SelectApps from \"../../apps/components/SelectApps\";\n\nconst moment = require(\"moment\");\n\nconst { TextArea } = Input;\n\nconst { Title, Link } = Typography;\n\nconst { Option } = Select;\n\nconst ManageTransModal = ({\n  getTrans,\n  transId,\n  openModal,\n  closeModal,\n  refetch,\n  initialValues,\n  setSelectedTransMain,\n  selectedApp,\n  selectedTransMain,\n}) => {\n  const [selectedTrans, setSelectedTrans] = useState(initialValues);\n  const [form] = Form.useForm();\n  const [requestData, setRequestData] = useState({});\n  const [loaderForm, setLoaderForm] = useState(false);\n  const sessionStoreRedux = useSelector((store) => store.session);\n\n  useEffect(() => {\n    if (transId) {\n      setLoaderForm(true);\n      // eslint-disable-next-line no-unused-expressions\n      !selectedApp &&\n        getTrans(transId, {\n          onSuccess: (response) => {\n            setSelectedTrans(response.result);\n            setLoaderForm(false);\n          },\n          onError: () => showGlobalNotification(\"error\", \"Error\", \"error\"),\n        });\n    } else {\n      setSelectedTrans(initialValues);\n    }\n  }, [transId]);\n\n  useEffect(() => {\n    form.setFieldsValue(initialValues);\n    if (selectedApp && selectedApp?._id) {\n      setLoaderForm(true);\n      getApp(selectedApp._id, {\n        onSuccess: (response) => {\n          setSelectedTrans({\n            ...selectedTrans,\n            appId: selectedApp._id,\n            app: response.result,\n            total: response.result.amount,\n            amount: response.result.amount,\n            fullname: `${response.result.userId.firstname} ${response.result.userId.lastname}`,\n            email: `${response.result.userId.email}`,\n            phone: `${response.result.userId.phone}`,\n            pending: 0,\n          });\n          setLoaderForm(false);\n        },\n        onError: () => showGlobalNotification(\"error\", \"Error\", \"error\"),\n      });\n    }\n  }, [openModal]);\n\n  useEffect(() => {\n    if (requestData.message) {\n      closeModal();\n      showGlobalNotification(\"success\", \"Exitooo\", requestData.message);\n      if (!transId) setSelectedTrans(initialValues);\n      refetch();\n    }\n  }, [requestData]);\n\n  useEffect(() => {\n    setSelectedTrans(selectedTransMain);\n  }, [selectedTransMain]);\n\n  const handleCloseModal = () => {\n    refetch();\n    closeModal();\n  };\n\n  useEffect(() => {\n    console.log(selectedApp);\n  }, [selectedApp]);\n\n  useEffect(() => {\n    console.log(selectedTrans);\n  }, [selectedTrans]);\n\n  const handleSubmit = () => {\n    form.validateFields().then(() => {\n      form.submit();\n    });\n  };\n\n  const handleApp = (appId) => {\n    setLoaderForm(true);\n    getApp(appId, {\n      onSuccess: (response) => {\n        setSelectedTrans({\n          ...selectedTrans,\n          appId,\n          app: response.result,\n          total: response.result.amount,\n          amount: response.result.amount,\n          fullname: `${response.result.userId.firstname} ${response.result.userId.lastname}`,\n          email: `${response.result.userId.email}`,\n          phone: `${response.result.userId.phone}`,\n          pending: 0,\n        });\n        setLoaderForm(false);\n      },\n      onError: () => showGlobalNotification(\"error\", \"Error\", \"error\"),\n    });\n  };\n\n  return (\n    <BaseModal\n      isOpenModal={openModal}\n      closeModal={handleCloseModal}\n      onCancel={handleCloseModal}\n      onConfirm={handleCloseModal}\n      title=\"Más detalles de la transacción\"\n      width={1000}\n      confirmText=\"\"\n      isCloseModal\n      top={70}\n    >\n      <div className=\"layout-form-modal entity-300 entity-small\">\n        {loaderForm ? (\n          <>\n            <Spin tip=\"Cargando\" />\n          </>\n        ) : (\n          <>\n            <Row gutter={15}>\n              <Divider orientation=\"left\">Acerca de la transacción</Divider>\n\n              <Descriptions size=\"small\" column={3} style={{ marginBottom: 20 }}>\n                <Descriptions.Item label=\"Descripcion\">{selectedTrans?.description}</Descriptions.Item>\n                <Descriptions.Item label=\"Codigo\">{selectedTrans?.code}</Descriptions.Item>\n                <Descriptions.Item label=\"Fecha\">{selectedTrans?.createAt}</Descriptions.Item>\n                <Descriptions.Item label=\"Nombre\">{selectedTrans?.fullname}</Descriptions.Item>\n                <Descriptions.Item label=\"Email\">{selectedTrans?.email}</Descriptions.Item>\n                <Descriptions.Item label=\"Phone\">{selectedTrans?.phone}</Descriptions.Item>\n                <Descriptions.Item label=\"Tipo\">{selectedTrans?.type}</Descriptions.Item>\n                <Descriptions.Item label=\"Estatus\">{selectedTrans?.status}</Descriptions.Item>\n                <Descriptions.Item label=\"Realizada por\">{selectedTrans.rootId?.email}</Descriptions.Item>\n              </Descriptions>\n              <Descriptions size=\"small\" column={3} style={{ marginBottom: 20 }}>\n                <Descriptions.Item label=\"Monto\">{selectedTrans?.amount}</Descriptions.Item>\n                <Descriptions.Item label=\"Pendiente\">{selectedTrans?.pending}</Descriptions.Item>\n                <Descriptions.Item label=\"Total\">{selectedTrans?.total}</Descriptions.Item>\n              </Descriptions>\n            </Row>\n            <Row gutter={15}>\n              <Divider orientation=\"left\">Acerca del Plan</Divider>\n\n              <Descriptions size=\"small\" column={3} style={{ marginBottom: 20 }}>\n                <Descriptions.Item label=\"Plan\">{selectedTrans.planId?.name}</Descriptions.Item>\n                <Descriptions.Item label=\"Costo\">{selectedTrans.planId?.price}</Descriptions.Item>\n\n                <Descriptions.Item label=\"Duración\">{selectedTrans.planId?.duration}</Descriptions.Item>\n              </Descriptions>\n            </Row>\n          </>\n        )}\n      </div>\n    </BaseModal>\n  );\n};\n\nManageTransModal.defaultProps = {\n  setTransId: () => {},\n};\n\nexport default ManageTransModal;\n"]},"metadata":{},"sourceType":"module"}