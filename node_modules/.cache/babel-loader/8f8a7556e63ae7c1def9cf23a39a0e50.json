{"ast":null,"code":"var _jsxFileName = \"/Users/kometsales/Documents/heyo-slack/src/features/bucket/containers/Buckets.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { confirmAlert } from \"react-confirm-alert\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport ActionBar from \"../../shared/components/ActionBar\";\nimport BucketsTable from \"../components/BucketsTable\";\nimport BucketsCard from \"../components/BucketsCard\";\nimport SearchBucketsForm from \"../components/SearchBucketForm\";\nimport ActionsUsers from \"../components/ActionsBucket\";\nimport ManageBucketModal from \"../components/ManageBucketModal\";\nimport AddUserButton from \"../components/AddBucketButton\";\nimport BucketsHeader from \"../components/BucketsHeader\";\nimport ManageBucketModal2 from \"../components/ManageBucketModal2\"; // HELPERS\n\nimport showGlobalNotification from \"../../../helpers/showGlobalNotification\"; // REDUX\n\nimport { setBucket, setBucketRedux } from \"../../../redux/bucket\"; // REQUEST\n\nimport { getBucket, archivedBucket, activeBucket } from \"../requests\"; // HOOKS\n\nimport useBuckets from \"../hooks/useBuckets\";\nimport useModal from \"../../shared/hooks/useModal\"; // CONSTANTS\n\nimport { globals, numbers } from \"../../../constants/globals\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Buckets = ({\n  isEmbed = false,\n  packId = null,\n  planId = null,\n  userId = null,\n  handleEditBucket = null\n}) => {\n  _s();\n\n  const dispatch = useDispatch();\n  const sessionStoreRedux = useSelector(store => store.session);\n  const {\n    t,\n    i18n\n  } = useTranslation();\n  const {\n    buckets,\n    filters,\n    setFilters,\n    pagination,\n    setPagination,\n    loading,\n    refetch\n  } = useBuckets(packId, planId, userId);\n  const commonProps = {\n    filters,\n    setFilters\n  };\n  const [page, setPage] = useState(globals.PAGE_MAIN);\n  const [selectedBucket, setSelectedBucket] = useState({});\n  const [containerMode, setContainerMode] = useState(\"cards\");\n  const [bucketId, setBucketId] = useState(null);\n  const [isOpenManageBucketsModal, openManageBucketsModal, closeManageBucketsModal] = useModal();\n  const [isOpenManageBucketModal2, openManageBucketModal2, closeManageBucketModal2] = useModal();\n  const [isOpenDetailsBucketModal, openDetailsBucketModal, closeDetailsBucketModal] = useModal();\n  const [initialValues, setInitialValues] = useState({\n    mode: \"Efectivo\",\n    fullname: \"\",\n    email: \"\",\n    phone: \"\",\n    amount: 0,\n    pending: 0,\n    total: 0,\n    appId: \"\"\n  });\n  useEffect(() => {\n    setBucket(selectedBucket)(dispatch);\n  }, [selectedBucket]);\n\n  const handleEdit = bucket => {\n    setSelectedBucket(bucket);\n    setBucketId(bucket._id);\n    openManageBucketModal2();\n  };\n\n  const handleDetails = bucket => {\n    getBucket(bucket._id, {\n      onSuccess: response => {\n        setBucketRedux(response.result);\n        setSelectedBucket(response.result);\n        openDetailsBucketModal();\n      },\n      onError: () => showGlobalNotification(\"error\", t(\"errorTitle\"), t(\"errorDescription\"))\n    });\n  };\n\n  const handleArchivedConfirm = bucket => {\n    archivedBucket({\n      bucket\n    }, {\n      onSuccess: response => {\n        refetch();\n        showGlobalNotification(\"success\", t(\"inHorabuena\"), t(\"successfulProcess\"));\n      },\n      onError: () => showGlobalNotification(\"error\", t(\"errorTitle\"), t(\"errorDescription\")),\n      onFinally: () => {}\n    });\n  };\n\n  const handleArchived = bucket => {\n    setBucketId(bucket._id);\n    confirmAlert({\n      title: `Eliminar ${bucket.image}`,\n      message: `Esta seguro que desea eliminar ?`,\n      buttons: [{\n        label: t(\"yes\"),\n        onClick: () => handleArchivedConfirm(bucket)\n      }, {\n        label: t(\"no\"),\n        onClick: () => {}\n      }]\n    });\n  };\n\n  const handleReverseConfirm = bucket => {\n    activeBucket({\n      bucket\n    }, {\n      onSuccess: () => {\n        refetch();\n        showGlobalNotification(\"success\", t(\"inHorabuena\"), t(\"successfulProcess\"));\n      },\n      onError: () => showGlobalNotification(\"error\", t(\"errorTitle\"), t(\"errorDescription\")),\n      onFinally: () => {}\n    });\n  };\n\n  const handleReverse = bucket => {\n    setBucketId(bucket._id);\n    confirmAlert({\n      title: \"Desea reversar el Pago\",\n      buttons: [{\n        label: t(\"yes\"),\n        onClick: () => handleReverseConfirm(bucket)\n      }, {\n        label: t(\"no\"),\n        onClick: () => {}\n      }]\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [page === globals.PAGE_MAIN && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [!isEmbed && /*#__PURE__*/_jsxDEV(BucketsHeader, {\n        t: t,\n        primaryAction: /*#__PURE__*/_jsxDEV(AddUserButton, {\n          isOpenManageBucketsModal: isOpenManageBucketsModal,\n          openManageBucketsModal: openManageBucketsModal,\n          containerMode: containerMode,\n          setContainerMode: setContainerMode\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(ActionBar, { ...commonProps,\n        options: {\n          actions: (buckets === null || buckets === void 0 ? void 0 : buckets.length) > 0 && ActionsUsers\n        },\n        children: /*#__PURE__*/_jsxDEV(SearchBucketsForm, { ...commonProps,\n          refetch: refetch\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 11\n      }, this), containerMode === \"table\" && /*#__PURE__*/_jsxDEV(BucketsTable, { ...commonProps,\n        buckets: buckets,\n        pagination: pagination,\n        setPagination: setPagination,\n        loading: loading,\n        refetch: refetch,\n        initialValues: initialValues,\n        setPage: setPage,\n        setSelectedBucket: setSelectedBucket,\n        selectedBucket: selectedBucket,\n        handleDetails: handleDetails,\n        handleEdit: handleEdit,\n        details: handleDetails,\n        handleArchived: handleArchived,\n        handleReverse: handleReverse,\n        openDetailsBucketModal: openDetailsBucketModal,\n        t: t\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 13\n      }, this), containerMode === \"cards\" && /*#__PURE__*/_jsxDEV(BucketsCard, { ...commonProps,\n        buckets: buckets,\n        pagination: pagination,\n        setPagination: setPagination,\n        loading: loading,\n        refetch: refetch,\n        initialValues: initialValues,\n        setPage: setPage,\n        setSelectedBucket: setSelectedBucket,\n        selectedBucket: selectedBucket,\n        handleDetails: handleDetails,\n        handleEdit: handleEdit,\n        details: handleDetails,\n        handleArchived: handleArchived,\n        handleReverse: handleReverse,\n        openDetailsBucketModal: openDetailsBucketModal\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(ManageBucketModal, {\n      refetch: refetch,\n      bucketId: bucketId,\n      setBucketId: setBucketId,\n      closeModal: closeManageBucketsModal,\n      openModal: isOpenManageBucketsModal,\n      t: t\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ManageBucketModal2, {\n      bucketId: bucketId,\n      refetch: refetch,\n      openModal: isOpenManageBucketModal2,\n      closeModal: closeManageBucketModal2,\n      setBucketId: setBucketId\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Buckets, \"92/rnIUjUGHpFoXt+oJBHQF2K7M=\", false, function () {\n  return [useDispatch, useSelector, useTranslation, useBuckets, useModal, useModal, useModal];\n});\n\n_c = Buckets;\nexport default Buckets;\n\nvar _c;\n\n$RefreshReg$(_c, \"Buckets\");","map":{"version":3,"sources":["/Users/kometsales/Documents/heyo-slack/src/features/bucket/containers/Buckets.js"],"names":["useState","useEffect","useTranslation","confirmAlert","useDispatch","useSelector","ActionBar","BucketsTable","BucketsCard","SearchBucketsForm","ActionsUsers","ManageBucketModal","AddUserButton","BucketsHeader","ManageBucketModal2","showGlobalNotification","setBucket","setBucketRedux","getBucket","archivedBucket","activeBucket","useBuckets","useModal","globals","numbers","Buckets","isEmbed","packId","planId","userId","handleEditBucket","dispatch","sessionStoreRedux","store","session","t","i18n","buckets","filters","setFilters","pagination","setPagination","loading","refetch","commonProps","page","setPage","PAGE_MAIN","selectedBucket","setSelectedBucket","containerMode","setContainerMode","bucketId","setBucketId","isOpenManageBucketsModal","openManageBucketsModal","closeManageBucketsModal","isOpenManageBucketModal2","openManageBucketModal2","closeManageBucketModal2","isOpenDetailsBucketModal","openDetailsBucketModal","closeDetailsBucketModal","initialValues","setInitialValues","mode","fullname","email","phone","amount","pending","total","appId","handleEdit","bucket","_id","handleDetails","onSuccess","response","result","onError","handleArchivedConfirm","onFinally","handleArchived","title","image","message","buttons","label","onClick","handleReverseConfirm","handleReverse","actions","length"],"mappings":"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","sourcesContent":["import { useState, useEffect } from \"react\";\nimport { useTranslation } from \"react-i18next\";\n\nimport { confirmAlert } from \"react-confirm-alert\";\nimport { useDispatch, useSelector } from \"react-redux\";\n\nimport ActionBar from \"../../shared/components/ActionBar\";\nimport BucketsTable from \"../components/BucketsTable\";\nimport BucketsCard from \"../components/BucketsCard\";\n\nimport SearchBucketsForm from \"../components/SearchBucketForm\";\nimport ActionsUsers from \"../components/ActionsBucket\";\nimport ManageBucketModal from \"../components/ManageBucketModal\";\nimport AddUserButton from \"../components/AddBucketButton\";\nimport BucketsHeader from \"../components/BucketsHeader\";\nimport ManageBucketModal2 from \"../components/ManageBucketModal2\";\n\n// HELPERS\nimport showGlobalNotification from \"../../../helpers/showGlobalNotification\";\n\n// REDUX\nimport { setBucket, setBucketRedux } from \"../../../redux/bucket\";\n\n// REQUEST\nimport { getBucket, archivedBucket, activeBucket } from \"../requests\";\n\n// HOOKS\nimport useBuckets from \"../hooks/useBuckets\";\nimport useModal from \"../../shared/hooks/useModal\";\n\n// CONSTANTS\nimport { globals, numbers } from \"../../../constants/globals\";\n\nconst Buckets = ({ isEmbed = false, packId = null, planId = null, userId = null, handleEditBucket = null }) => {\n  const dispatch = useDispatch();\n  const sessionStoreRedux = useSelector((store) => store.session);\n  const { t, i18n } = useTranslation();\n\n  const { buckets, filters, setFilters, pagination, setPagination, loading, refetch } = useBuckets(\n    packId,\n    planId,\n    userId\n  );\n\n  const commonProps = { filters, setFilters };\n  const [page, setPage] = useState(globals.PAGE_MAIN);\n  const [selectedBucket, setSelectedBucket] = useState({});\n  const [containerMode, setContainerMode] = useState(\"cards\");\n\n  const [bucketId, setBucketId] = useState(null);\n  const [isOpenManageBucketsModal, openManageBucketsModal, closeManageBucketsModal] = useModal();\n  const [isOpenManageBucketModal2, openManageBucketModal2, closeManageBucketModal2] = useModal();\n\n  const [isOpenDetailsBucketModal, openDetailsBucketModal, closeDetailsBucketModal] = useModal();\n\n  const [initialValues, setInitialValues] = useState({\n    mode: \"Efectivo\",\n    fullname: \"\",\n    email: \"\",\n    phone: \"\",\n    amount: 0,\n    pending: 0,\n    total: 0,\n    appId: \"\",\n  });\n\n  useEffect(() => {\n    setBucket(selectedBucket)(dispatch);\n  }, [selectedBucket]);\n\n  const handleEdit = (bucket) => {\n    setSelectedBucket(bucket);\n    setBucketId(bucket._id);\n    openManageBucketModal2();\n  };\n\n  const handleDetails = (bucket) => {\n    getBucket(bucket._id, {\n      onSuccess: (response) => {\n        setBucketRedux(response.result);\n        setSelectedBucket(response.result);\n        openDetailsBucketModal();\n      },\n      onError: () => showGlobalNotification(\"error\", t(\"errorTitle\"), t(\"errorDescription\")),\n    });\n  };\n\n  const handleArchivedConfirm = (bucket) => {\n    archivedBucket(\n      {\n        bucket,\n      },\n      {\n        onSuccess: (response) => {\n          refetch();\n          showGlobalNotification(\"success\", t(\"inHorabuena\"), t(\"successfulProcess\"));\n        },\n        onError: () => showGlobalNotification(\"error\", t(\"errorTitle\"), t(\"errorDescription\")),\n        onFinally: () => {},\n      }\n    );\n  };\n\n  const handleArchived = (bucket) => {\n    setBucketId(bucket._id);\n    confirmAlert({\n      title: `Eliminar ${bucket.image}`,\n      message: `Esta seguro que desea eliminar ?`,\n      buttons: [\n        {\n          label: t(\"yes\"),\n          onClick: () => handleArchivedConfirm(bucket),\n        },\n        {\n          label: t(\"no\"),\n          onClick: () => {},\n        },\n      ],\n    });\n  };\n\n  const handleReverseConfirm = (bucket) => {\n    activeBucket(\n      {\n        bucket,\n      },\n      {\n        onSuccess: () => {\n          refetch();\n          showGlobalNotification(\"success\", t(\"inHorabuena\"), t(\"successfulProcess\"));\n        },\n        onError: () => showGlobalNotification(\"error\", t(\"errorTitle\"), t(\"errorDescription\")),\n        onFinally: () => {},\n      }\n    );\n  };\n\n  const handleReverse = (bucket) => {\n    setBucketId(bucket._id);\n    confirmAlert({\n      title: \"Desea reversar el Pago\",\n      buttons: [\n        {\n          label: t(\"yes\"),\n          onClick: () => handleReverseConfirm(bucket),\n        },\n        {\n          label: t(\"no\"),\n          onClick: () => {},\n        },\n      ],\n    });\n  };\n\n  return (\n    <>\n      {page === globals.PAGE_MAIN && (\n        <div>\n          {!isEmbed && (\n            <BucketsHeader\n              t={t}\n              primaryAction={\n                <AddUserButton\n                  isOpenManageBucketsModal={isOpenManageBucketsModal}\n                  openManageBucketsModal={openManageBucketsModal}\n                  containerMode={containerMode}\n                  setContainerMode={setContainerMode}\n                />\n              }\n            />\n          )}\n          <ActionBar {...commonProps} options={{ actions: buckets?.length > 0 && ActionsUsers }}>\n            <SearchBucketsForm {...commonProps} refetch={refetch} />\n          </ActionBar>\n          {containerMode === \"table\" && (\n            <BucketsTable\n              {...commonProps}\n              buckets={buckets}\n              pagination={pagination}\n              setPagination={setPagination}\n              loading={loading}\n              refetch={refetch}\n              initialValues={initialValues}\n              setPage={setPage}\n              setSelectedBucket={setSelectedBucket}\n              selectedBucket={selectedBucket}\n              handleDetails={handleDetails}\n              handleEdit={handleEdit}\n              details={handleDetails}\n              handleArchived={handleArchived}\n              handleReverse={handleReverse}\n              openDetailsBucketModal={openDetailsBucketModal}\n              t={t}\n            />\n          )}\n          {containerMode === \"cards\" && (\n            <BucketsCard\n              {...commonProps}\n              buckets={buckets}\n              pagination={pagination}\n              setPagination={setPagination}\n              loading={loading}\n              refetch={refetch}\n              initialValues={initialValues}\n              setPage={setPage}\n              setSelectedBucket={setSelectedBucket}\n              selectedBucket={selectedBucket}\n              handleDetails={handleDetails}\n              handleEdit={handleEdit}\n              details={handleDetails}\n              handleArchived={handleArchived}\n              handleReverse={handleReverse}\n              openDetailsBucketModal={openDetailsBucketModal}\n            />\n          )}\n        </div>\n      )}\n\n      <ManageBucketModal\n        refetch={refetch}\n        bucketId={bucketId}\n        setBucketId={setBucketId}\n        closeModal={closeManageBucketsModal}\n        openModal={isOpenManageBucketsModal}\n        t={t}\n      />\n\n      <ManageBucketModal2\n        bucketId={bucketId}\n        refetch={refetch}\n        openModal={isOpenManageBucketModal2}\n        closeModal={closeManageBucketModal2}\n        setBucketId={setBucketId}\n      />\n    </>\n  );\n};\n\nexport default Buckets;\n"]},"metadata":{},"sourceType":"module"}