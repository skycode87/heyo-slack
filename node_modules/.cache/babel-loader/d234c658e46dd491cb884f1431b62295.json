{"ast":null,"code":"var _jsxFileName = \"/Users/kometsales/Documents/heyo-slack/src/features/master/containers/Master.js\",\n    _s = $RefreshSig$();\n\nimport { useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { confirmAlert } from \"react-confirm-alert\";\nimport ActionBar from \"../../shared/components/ActionBar\";\nimport MasterTable from \"../components/MastersTable\";\nimport SearchMastersForm from \"../components/SearchMastersForm\";\nimport useMaster from \"../hooks/useMaster\";\nimport BaseModal from \"../../shared/components/Modal\";\nimport ManageMasterModal from \"../components/ManageMasterModal\";\nimport AddMasterButton from \"../components/AddMasterButton\";\nimport MastersHeader from \"../components/MastersHeader\";\nimport Breadcrumb from \"../components/Breadcrumb\";\nimport { getMaster, archivedMaster, activeMaster } from \"../requests\";\nimport showGlobalNotification from \"../../../helpers/showGlobalNotification\"; // Import\n\nimport \"react-confirm-alert/src/react-confirm-alert.css\"; // Import css\n\nimport { setMasterRedux, setMasterFatherRedux } from \"../../../redux/master\";\nimport useModal from \"../../shared/hooks/useModal\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Masters = () => {\n  _s();\n\n  const dispatch = useDispatch();\n  const masterStoreRedux = useSelector(store => store.master);\n  const {\n    masters,\n    filters,\n    setFilters,\n    pagination,\n    setPagination,\n    loading,\n    refetch\n  } = useMaster();\n  const commonProps = {\n    filters,\n    setFilters\n  };\n  const [page, setPage] = useState(\"all\");\n  const [selectedMaster, setSelectedMaster] = useState({});\n  const [isOpenDeleteModal, openDeleteModal, closeDeleteModal] = useModal();\n  const [isOpenActiveModal, openActiveModal, closeActiveModal] = useModal();\n  const [reset, setReset] = useState(0);\n  const [masterId, setMasterId] = useState(null);\n  const [isOpenManageMastersModal, openManageMastersModal, closeManageMastersModal] = useModal();\n  const resetValues = {\n    name: \"\",\n    value: \"\",\n    description: \"\",\n    fatherId: \"\"\n  };\n  const [initialValues, setInitialValues] = useState(resetValues);\n\n  const handleAdd = data => {\n    setInitialValues({ ...initialValues,\n      fatherId: data._id\n    });\n    setReset(Math.floor(Math.random() * 11));\n    openManageMastersModal();\n  };\n\n  const handleEdit = master => {\n    setSelectedMaster(master);\n    setMasterId(master._id);\n    setReset(Math.floor(Math.random() * 11));\n    openManageMastersModal();\n  };\n\n  const handleArchivedConfirm = master => {\n    archivedMaster({\n      master\n    }, {\n      onSuccess: response => {\n        refetch();\n        showGlobalNotification(\"success\", \"En Horabuena\", \"El registro ha sido eliminado\");\n      },\n      onError: () => showGlobalNotification(\"error\", \"Error\", \"error\"),\n      onFinally: () => closeDeleteModal()\n    });\n  };\n\n  const handleArchived = master => {\n    setMasterId(master._id);\n    confirmAlert({\n      title: `Eliminar ${master.name}`,\n      message: `Esta seguro que desea eliminar el setting de ${master.name}?`,\n      buttons: [{\n        label: \"SI\",\n        onClick: () => handleArchivedConfirm(master)\n      }, {\n        label: \"NO\",\n        onClick: () => {}\n      }]\n    });\n  };\n\n  const handleActiveConfirm = master => {\n    // setSelectedMaster(master);\n    activeMaster({\n      master\n    }, {\n      onSuccess: response => {\n        refetch();\n        showGlobalNotification(\"success\", \"En Horabuena\", \"El registro ha sido actualizado\");\n      },\n      onError: () => showGlobalNotification(\"error\", \"Error\", \"error\"),\n      onFinally: () => closeDeleteModal()\n    });\n  };\n\n  const handleActive = master => {\n    setMasterId(master._id);\n    confirmAlert({\n      title: master.active ? \"Desactivar el Setting\" : \"Activar el Setting\",\n      message: \"Esta seguro que desea continuar?\",\n      buttons: [{\n        label: \"SI\",\n        onClick: () => handleActiveConfirm(master)\n      }, {\n        label: \"NO\",\n        onClick: () => {}\n      }]\n    });\n  };\n\n  const handleDetails = master => {\n    setFilters({ ...filters,\n      fatherId: master._id\n    });\n    setSelectedMaster(master);\n    setMasterFatherRedux(master)(dispatch);\n    refetch();\n  };\n\n  const handleGoBack = () => {\n    setFilters({ ...filters,\n      fatherId: \"\",\n      ...resetValues\n    });\n    setSelectedMaster(resetValues);\n    setMasterFatherRedux(resetValues)(dispatch);\n    refetch();\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [page === \"all\" && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Breadcrumb, {\n        goto: handleGoBack\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(MastersHeader, {\n        selectedMaster: selectedMaster,\n        primaryAction: /*#__PURE__*/_jsxDEV(AddMasterButton, {\n          refetch: refetch,\n          initialValues: initialValues,\n          selectedMaster: selectedMaster\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 15\n        }, this),\n        handleGoBack: handleGoBack\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(ActionBar, { ...commonProps,\n        children: /*#__PURE__*/_jsxDEV(SearchMastersForm, { ...commonProps,\n          refetch: refetch\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(MasterTable, { ...commonProps,\n        masters: masters,\n        pagination: pagination,\n        setPagination: setPagination,\n        loading: loading,\n        refetch: refetch,\n        initialValues: initialValues,\n        setPage: setPage,\n        setSelectedMaster: setSelectedMaster,\n        selectedMaster: selectedMaster,\n        handleDetails: handleDetails,\n        handleEdit: handleEdit,\n        handleArchived: handleArchived,\n        openDeleteModal: openDeleteModal,\n        details: handleDetails,\n        handleAdd: handleAdd,\n        handleActive: handleActive\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(BaseModal, {\n      isOpenModal: isOpenDeleteModal,\n      closeModal: closeDeleteModal,\n      onConfirm: handleArchivedConfirm,\n      onCancel: closeDeleteModal,\n      isAlert: \"true\",\n      title: \"Desea eliminar este Setting?\",\n      confirmText: \"Si\",\n      cancelText: \"No\",\n      footer: true,\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Setting: \", selectedMaster.name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ManageMasterModal, {\n      refetch: refetch,\n      masterId: masterId,\n      setMasterId: setMasterId,\n      closeModal: closeManageMastersModal,\n      openModal: isOpenManageMastersModal,\n      initialValues: initialValues,\n      masters: masters,\n      selectedMasterMain: selectedMaster,\n      setSelectedMasterMain: setSelectedMaster,\n      setMasterRedux: setMasterRedux,\n      getMaster: getMaster,\n      masterStoreRedux: masterStoreRedux,\n      reset: reset\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Masters, \"espnokqexEfPgRXhsiDqHzS0m8s=\", false, function () {\n  return [useDispatch, useSelector, useMaster, useModal, useModal, useModal];\n});\n\n_c = Masters;\nexport default Masters;\n\nvar _c;\n\n$RefreshReg$(_c, \"Masters\");","map":{"version":3,"sources":["/Users/kometsales/Documents/heyo-slack/src/features/master/containers/Master.js"],"names":["useState","useDispatch","useSelector","confirmAlert","ActionBar","MasterTable","SearchMastersForm","useMaster","BaseModal","ManageMasterModal","AddMasterButton","MastersHeader","Breadcrumb","getMaster","archivedMaster","activeMaster","showGlobalNotification","setMasterRedux","setMasterFatherRedux","useModal","Masters","dispatch","masterStoreRedux","store","master","masters","filters","setFilters","pagination","setPagination","loading","refetch","commonProps","page","setPage","selectedMaster","setSelectedMaster","isOpenDeleteModal","openDeleteModal","closeDeleteModal","isOpenActiveModal","openActiveModal","closeActiveModal","reset","setReset","masterId","setMasterId","isOpenManageMastersModal","openManageMastersModal","closeManageMastersModal","resetValues","name","value","description","fatherId","initialValues","setInitialValues","handleAdd","data","_id","Math","floor","random","handleEdit","handleArchivedConfirm","onSuccess","response","onError","onFinally","handleArchived","title","message","buttons","label","onClick","handleActiveConfirm","handleActive","active","handleDetails","handleGoBack"],"mappings":"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","sourcesContent":["import { useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { confirmAlert } from \"react-confirm-alert\";\nimport ActionBar from \"../../shared/components/ActionBar\";\nimport MasterTable from \"../components/MastersTable\";\nimport SearchMastersForm from \"../components/SearchMastersForm\";\nimport useMaster from \"../hooks/useMaster\";\nimport BaseModal from \"../../shared/components/Modal\";\nimport ManageMasterModal from \"../components/ManageMasterModal\";\nimport AddMasterButton from \"../components/AddMasterButton\";\nimport MastersHeader from \"../components/MastersHeader\";\nimport Breadcrumb from \"../components/Breadcrumb\";\nimport { getMaster, archivedMaster, activeMaster } from \"../requests\";\nimport showGlobalNotification from \"../../../helpers/showGlobalNotification\"; // Import\nimport \"react-confirm-alert/src/react-confirm-alert.css\"; // Import css\n\nimport { setMasterRedux, setMasterFatherRedux } from \"../../../redux/master\";\nimport useModal from \"../../shared/hooks/useModal\";\n\nconst Masters = () => {\n  const dispatch = useDispatch();\n  const masterStoreRedux = useSelector((store) => store.master);\n\n  const { masters, filters, setFilters, pagination, setPagination, loading, refetch } = useMaster();\n\n  const commonProps = { filters, setFilters };\n  const [page, setPage] = useState(\"all\");\n  const [selectedMaster, setSelectedMaster] = useState({});\n  const [isOpenDeleteModal, openDeleteModal, closeDeleteModal] = useModal();\n  const [isOpenActiveModal, openActiveModal, closeActiveModal] = useModal();\n\n  const [reset, setReset] = useState(0);\n\n  const [masterId, setMasterId] = useState(null);\n  const [isOpenManageMastersModal, openManageMastersModal, closeManageMastersModal] = useModal();\n\n  const resetValues = {\n    name: \"\",\n    value: \"\",\n    description: \"\",\n    fatherId: \"\",\n  };\n\n  const [initialValues, setInitialValues] = useState(resetValues);\n\n  const handleAdd = (data) => {\n    setInitialValues({ ...initialValues, fatherId: data._id });\n    setReset(Math.floor(Math.random() * 11));\n    openManageMastersModal();\n  };\n\n  const handleEdit = (master) => {\n    setSelectedMaster(master);\n    setMasterId(master._id);\n    setReset(Math.floor(Math.random() * 11));\n    openManageMastersModal();\n  };\n\n  const handleArchivedConfirm = (master) => {\n    archivedMaster(\n      {\n        master,\n      },\n      {\n        onSuccess: (response) => {\n          refetch();\n          showGlobalNotification(\"success\", \"En Horabuena\", \"El registro ha sido eliminado\");\n        },\n        onError: () => showGlobalNotification(\"error\", \"Error\", \"error\"),\n        onFinally: () => closeDeleteModal(),\n      }\n    );\n  };\n\n  const handleArchived = (master) => {\n    setMasterId(master._id);\n    confirmAlert({\n      title: `Eliminar ${master.name}`,\n      message: `Esta seguro que desea eliminar el setting de ${master.name}?`,\n      buttons: [\n        {\n          label: \"SI\",\n          onClick: () => handleArchivedConfirm(master),\n        },\n        {\n          label: \"NO\",\n          onClick: () => {},\n        },\n      ],\n    });\n  };\n\n  const handleActiveConfirm = (master) => {\n    // setSelectedMaster(master);\n    activeMaster(\n      {\n        master,\n      },\n      {\n        onSuccess: (response) => {\n          refetch();\n          showGlobalNotification(\"success\", \"En Horabuena\", \"El registro ha sido actualizado\");\n        },\n        onError: () => showGlobalNotification(\"error\", \"Error\", \"error\"),\n        onFinally: () => closeDeleteModal(),\n      }\n    );\n  };\n\n  const handleActive = (master) => {\n    setMasterId(master._id);\n    confirmAlert({\n      title: master.active ? \"Desactivar el Setting\" : \"Activar el Setting\",\n      message: \"Esta seguro que desea continuar?\",\n      buttons: [\n        {\n          label: \"SI\",\n          onClick: () => handleActiveConfirm(master),\n        },\n        {\n          label: \"NO\",\n          onClick: () => {},\n        },\n      ],\n    });\n  };\n\n  const handleDetails = (master) => {\n    setFilters({ ...filters, fatherId: master._id });\n    setSelectedMaster(master);\n    setMasterFatherRedux(master)(dispatch);\n    refetch();\n  };\n\n  const handleGoBack = () => {\n    setFilters({ ...filters, fatherId: \"\", ...resetValues });\n    setSelectedMaster(resetValues);\n    setMasterFatherRedux(resetValues)(dispatch);\n    refetch();\n  };\n\n  return (\n    <>\n      {page === \"all\" && (\n        <div>\n          <Breadcrumb goto={handleGoBack} />\n          <MastersHeader\n            selectedMaster={selectedMaster}\n            primaryAction={\n              <AddMasterButton refetch={refetch} initialValues={initialValues} selectedMaster={selectedMaster} />\n            }\n            handleGoBack={handleGoBack}\n          />\n          <ActionBar {...commonProps}>\n            <SearchMastersForm {...commonProps} refetch={refetch} />\n          </ActionBar>\n          <MasterTable\n            {...commonProps}\n            masters={masters}\n            pagination={pagination}\n            setPagination={setPagination}\n            loading={loading}\n            refetch={refetch}\n            initialValues={initialValues}\n            setPage={setPage}\n            setSelectedMaster={setSelectedMaster}\n            selectedMaster={selectedMaster}\n            handleDetails={handleDetails}\n            handleEdit={handleEdit}\n            handleArchived={handleArchived}\n            openDeleteModal={openDeleteModal}\n            details={handleDetails}\n            handleAdd={handleAdd}\n            handleActive={handleActive}\n          />\n        </div>\n      )}\n      <BaseModal\n        isOpenModal={isOpenDeleteModal}\n        closeModal={closeDeleteModal}\n        onConfirm={handleArchivedConfirm}\n        onCancel={closeDeleteModal}\n        isAlert=\"true\"\n        title=\"Desea eliminar este Setting?\"\n        confirmText=\"Si\"\n        cancelText=\"No\"\n        footer\n      >\n        <p>Setting: {selectedMaster.name}</p>\n      </BaseModal>\n      <ManageMasterModal\n        refetch={refetch}\n        masterId={masterId}\n        setMasterId={setMasterId}\n        closeModal={closeManageMastersModal}\n        openModal={isOpenManageMastersModal}\n        initialValues={initialValues}\n        masters={masters}\n        selectedMasterMain={selectedMaster}\n        setSelectedMasterMain={setSelectedMaster}\n        setMasterRedux={setMasterRedux}\n        getMaster={getMaster}\n        masterStoreRedux={masterStoreRedux}\n        reset={reset}\n      />\n    </>\n  );\n};\n\nexport default Masters;\n"]},"metadata":{},"sourceType":"module"}