{"ast":null,"code":"var _jsxFileName = \"/Users/kometsales/Documents/heyo-slack/src/features/apps/containers/Apps.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { confirmAlert } from \"react-confirm-alert\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport ActionBar from \"../../shared/components/ActionBar\";\nimport AppsTable from \"../components/AppsTable\";\nimport SearchAppsForm from \"../components/SearchAppsForm\";\nimport ActionsUsers from \"../components/ActionsApps\";\nimport ManageAppModal2 from \"../components/ManageAppModal2\";\nimport AddUserButton from \"../components/AddAppButton\";\nimport ManageTransModal from \"../../trans/components/ManageTransModal\";\nimport AppHeader from \"../components/AppHeader\";\nimport AppsHeader from \"../components/AppsHeader\";\nimport InfoPack from \"../components/InfoPack\";\nimport InfoRoot from \"../components/InfoRoot\"; // HELPERS\n\nimport showGlobalNotification from \"../../../helpers/showGlobalNotification\"; // REDUX\n\nimport { setApp, setAppRedux } from \"../../../redux/app\"; // REQUEST\n\nimport { getApp, archivedApp, activeApp } from \"../requests\"; // HOOKS\n\nimport useApps from \"../hooks/useApps\";\nimport useModal from \"../../shared/hooks/useModal\"; // CONTAINERS\n\nimport TransContainer from \"../../trans/containers/Trans\"; // CONSTANTS\n\nimport { globals, numbers } from \"../../../constants/globals\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Apps = ({\n  isEmbed = false,\n  userId = null,\n  reload,\n  planId = null\n}) => {\n  _s();\n\n  const {\n    t,\n    i18n\n  } = useTranslation();\n  const dispatch = useDispatch();\n  const sessionStoreRedux = useSelector(store => store.session);\n  const {\n    apps,\n    filters,\n    setFilters,\n    pagination,\n    setPagination,\n    loading,\n    refetch\n  } = useApps(userId, planId);\n  const commonProps = {\n    filters,\n    setFilters\n  };\n  const [page, setPage] = useState(globals.PAGE_MAIN);\n  const [subpage, setSubpage] = useState(numbers.ONE);\n  const [selectedApp, setSelectedApp] = useState({});\n  const [appId, setAppId] = useState(null);\n  const [isOpenManageAppsModal, openManageAppsModal, closeManageAppsModal] = useModal();\n  const [isOpenManageTranssModal, openManageTranssModal, closeManageTranssModal] = useModal();\n  const [initialValues, setInitialValues] = useState({\n    name: \"\",\n    duration: \"\",\n    category: \"\",\n    maxLimit: 1,\n    minLimit: 1,\n    observation: \"\",\n    active: true,\n    tag: \"\",\n    avatar: \"\",\n    public: false,\n    startdate: \"2020/01/01\",\n    closuredate: \"2020/01/01\"\n  });\n  useEffect(() => {\n    setApp(selectedApp)(dispatch);\n  }, [selectedApp]);\n  useEffect(() => {\n    refetch();\n  }, [reload]);\n\n  const handleEdit = app => {\n    setSelectedApp(app);\n    setAppId(app._id);\n    openManageAppsModal();\n  };\n\n  const handleDetails = app => {\n    setSelectedApp({});\n    setAppId(app._id);\n    setPage(globals.PAGE_ONE);\n    setSubpage(numbers.ONE);\n    getApp(app._id, {\n      onSuccess: response => {\n        setSelectedApp(response.result);\n        setAppRedux(response.result)(dispatch);\n      },\n      onError: () => showGlobalNotification(\"error\", t(\"errorTitle\"), t(\"errorDescription\"))\n    }); //\n  };\n\n  const handleAddTrans = app => {\n    setSelectedApp(app);\n    setAppId(app._id);\n    openManageTranssModal();\n  };\n\n  const handleArchivedConfirm = app => {\n    archivedApp({\n      app\n    }, {\n      onSuccess: response => {\n        refetch();\n        showGlobalNotification(\"success\", t(\"inHorabuena\"), t(\"successfulProcess\"));\n      },\n      onError: () => showGlobalNotification(\"error\", t(\"errorTitle\"), t(\"errorDescription\")),\n      onFinally: () => {}\n    });\n  };\n\n  const handleArchived = app => {\n    setAppId(app._id);\n    confirmAlert({\n      title: `Eliminar ${app.name}`,\n      message: `Esta seguro que desea eliminar el setting de ${app.name}?`,\n      buttons: [{\n        label: t(\"yes\"),\n        onClick: () => handleArchivedConfirm(app)\n      }, {\n        label: t(\"no\"),\n        onClick: () => {}\n      }]\n    });\n  };\n\n  const handleActiveConfirm = app => {\n    activeApp({\n      app\n    }, {\n      onSuccess: response => {\n        refetch();\n        showGlobalNotification(\"success\", t(\"inHorabuena\"), t(\"successfulProcess\"));\n      },\n      onError: () => showGlobalNotification(\"error\", t(\"errorTitle\"), t(\"errorDescription\")),\n      onFinally: () => {}\n    });\n  };\n\n  const handleActive = app => {\n    setAppId(app._id);\n    confirmAlert({\n      title: app.active ? `Desactivar la ${t(\"application\")}` : `Activar la ${t(\"application\")}`,\n      message: \"Esta seguro que desea continuar?\",\n      buttons: [{\n        label: t(\"yes\"),\n        onClick: () => handleActiveConfirm(app)\n      }, {\n        label: t(\"no\"),\n        onClick: () => {}\n      }]\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [page === globals.PAGE_MAIN && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [!isEmbed && /*#__PURE__*/_jsxDEV(AppsHeader, {\n        t: t,\n        primaryAction: /*#__PURE__*/_jsxDEV(AddUserButton, {\n          isOpenManageAppsModal: isOpenManageAppsModal,\n          openManageAppsModal: openManageAppsModal,\n          t: t\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(ActionBar, {\n        t: t,\n        ...commonProps,\n        options: {\n          actions: (apps === null || apps === void 0 ? void 0 : apps.length) > 0 && ActionsUsers\n        },\n        children: /*#__PURE__*/_jsxDEV(SearchAppsForm, { ...commonProps,\n          refetch: refetch,\n          t: t\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(AppsTable, { ...commonProps,\n        apps: apps,\n        pagination: pagination,\n        setPagination: setPagination,\n        loading: loading,\n        refetch: refetch,\n        setPage: setPage,\n        setSelectedApp: setSelectedApp,\n        selectedApp: selectedApp,\n        handleDetails: handleDetails,\n        handleEdit: handleEdit,\n        details: handleDetails,\n        handleArchived: handleArchived,\n        handleActive: handleActive,\n        handleAddTrans: handleAddTrans,\n        t: t\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 9\n    }, this), page === globals.PAGE_ONE && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(AppHeader, {\n        setPage: setPage,\n        selectedApp: selectedApp,\n        handleDetails: handleDetails,\n        handleEdit: handleEdit,\n        setSubpage: setSubpage,\n        handleArchived: handleArchived,\n        t: t\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 11\n      }, this), subpage === numbers.ONE && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: 20\n        },\n        children: /*#__PURE__*/_jsxDEV(TransContainer, {\n          isEmbed: \"true\",\n          appId: appId\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 13\n      }, this), subpage === numbers.TWO && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: 20\n        },\n        children: /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \" Acerca de los eventos \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 13\n      }, this), subpage === numbers.THREE && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: 20\n        },\n        children: /*#__PURE__*/_jsxDEV(InfoPack, {\n          selectedApp: selectedApp\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 13\n      }, this), subpage === numbers.FOUR && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: 20\n        },\n        children: /*#__PURE__*/_jsxDEV(InfoRoot, {\n          selectedApp: selectedApp\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(ManageAppModal2, {\n      refetch: refetch,\n      appId: appId,\n      setAppId: setAppId,\n      closeModal: closeManageAppsModal,\n      openModal: isOpenManageAppsModal,\n      t: t\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ManageTransModal, {\n      refetch: refetch,\n      closeModal: closeManageTranssModal,\n      openModal: isOpenManageTranssModal,\n      initialValues: initialValues,\n      session: sessionStoreRedux.currentSession,\n      selectedApp: selectedApp,\n      t: t\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Apps, \"YctpkIwTku+ThuoqElzopnQkvV8=\", false, function () {\n  return [useTranslation, useDispatch, useSelector, useApps, useModal, useModal];\n});\n\n_c = Apps;\nexport default Apps;\n\nvar _c;\n\n$RefreshReg$(_c, \"Apps\");","map":{"version":3,"sources":["/Users/kometsales/Documents/heyo-slack/src/features/apps/containers/Apps.js"],"names":["useState","useEffect","useTranslation","confirmAlert","useDispatch","useSelector","ActionBar","AppsTable","SearchAppsForm","ActionsUsers","ManageAppModal2","AddUserButton","ManageTransModal","AppHeader","AppsHeader","InfoPack","InfoRoot","showGlobalNotification","setApp","setAppRedux","getApp","archivedApp","activeApp","useApps","useModal","TransContainer","globals","numbers","Apps","isEmbed","userId","reload","planId","t","i18n","dispatch","sessionStoreRedux","store","session","apps","filters","setFilters","pagination","setPagination","loading","refetch","commonProps","page","setPage","PAGE_MAIN","subpage","setSubpage","ONE","selectedApp","setSelectedApp","appId","setAppId","isOpenManageAppsModal","openManageAppsModal","closeManageAppsModal","isOpenManageTranssModal","openManageTranssModal","closeManageTranssModal","initialValues","setInitialValues","name","duration","category","maxLimit","minLimit","observation","active","tag","avatar","public","startdate","closuredate","handleEdit","app","_id","handleDetails","PAGE_ONE","onSuccess","response","result","onError","handleAddTrans","handleArchivedConfirm","onFinally","handleArchived","title","message","buttons","label","onClick","handleActiveConfirm","handleActive","actions","length","padding","TWO","THREE","FOUR","currentSession"],"mappings":"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","sourcesContent":["import { useState, useEffect } from \"react\";\nimport { useTranslation } from \"react-i18next\";\n\nimport { confirmAlert } from \"react-confirm-alert\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport ActionBar from \"../../shared/components/ActionBar\";\nimport AppsTable from \"../components/AppsTable\";\nimport SearchAppsForm from \"../components/SearchAppsForm\";\nimport ActionsUsers from \"../components/ActionsApps\";\nimport ManageAppModal2 from \"../components/ManageAppModal2\";\nimport AddUserButton from \"../components/AddAppButton\";\nimport ManageTransModal from \"../../trans/components/ManageTransModal\";\nimport AppHeader from \"../components/AppHeader\";\nimport AppsHeader from \"../components/AppsHeader\";\nimport InfoPack from \"../components/InfoPack\";\nimport InfoRoot from \"../components/InfoRoot\";\n\n// HELPERS\nimport showGlobalNotification from \"../../../helpers/showGlobalNotification\";\n\n// REDUX\nimport { setApp, setAppRedux } from \"../../../redux/app\";\n\n// REQUEST\nimport { getApp, archivedApp, activeApp } from \"../requests\";\n\n// HOOKS\nimport useApps from \"../hooks/useApps\";\nimport useModal from \"../../shared/hooks/useModal\";\n\n// CONTAINERS\nimport TransContainer from \"../../trans/containers/Trans\";\n\n// CONSTANTS\nimport { globals, numbers } from \"../../../constants/globals\";\n\nconst Apps = ({ isEmbed = false, userId = null, reload, planId = null }) => {\n  const { t, i18n } = useTranslation();\n  const dispatch = useDispatch();\n  const sessionStoreRedux = useSelector((store) => store.session);\n\n  const { apps, filters, setFilters, pagination, setPagination, loading, refetch } = useApps(userId, planId);\n\n  const commonProps = { filters, setFilters };\n  const [page, setPage] = useState(globals.PAGE_MAIN);\n  const [subpage, setSubpage] = useState(numbers.ONE);\n  const [selectedApp, setSelectedApp] = useState({});\n\n  const [appId, setAppId] = useState(null);\n  const [isOpenManageAppsModal, openManageAppsModal, closeManageAppsModal] = useModal();\n\n  const [isOpenManageTranssModal, openManageTranssModal, closeManageTranssModal] = useModal();\n\n  const [initialValues, setInitialValues] = useState({\n    name: \"\",\n    duration: \"\",\n    category: \"\",\n    maxLimit: 1,\n    minLimit: 1,\n    observation: \"\",\n    active: true,\n    tag: \"\",\n    avatar: \"\",\n    public: false,\n    startdate: \"2020/01/01\",\n    closuredate: \"2020/01/01\",\n  });\n\n  useEffect(() => {\n    setApp(selectedApp)(dispatch);\n  }, [selectedApp]);\n\n  useEffect(() => {\n    refetch();\n  }, [reload]);\n\n  const handleEdit = (app) => {\n    setSelectedApp(app);\n    setAppId(app._id);\n    openManageAppsModal();\n  };\n\n  const handleDetails = (app) => {\n    setSelectedApp({});\n    setAppId(app._id);\n    setPage(globals.PAGE_ONE);\n    setSubpage(numbers.ONE);\n    getApp(app._id, {\n      onSuccess: (response) => {\n        setSelectedApp(response.result);\n        setAppRedux(response.result)(dispatch);\n      },\n      onError: () => showGlobalNotification(\"error\", t(\"errorTitle\"), t(\"errorDescription\")),\n    });\n    //\n  };\n\n  const handleAddTrans = (app) => {\n    setSelectedApp(app);\n    setAppId(app._id);\n    openManageTranssModal();\n  };\n\n  const handleArchivedConfirm = (app) => {\n    archivedApp(\n      {\n        app,\n      },\n      {\n        onSuccess: (response) => {\n          refetch();\n          showGlobalNotification(\"success\", t(\"inHorabuena\"), t(\"successfulProcess\"));\n        },\n        onError: () => showGlobalNotification(\"error\", t(\"errorTitle\"), t(\"errorDescription\")),\n        onFinally: () => {},\n      }\n    );\n  };\n\n  const handleArchived = (app) => {\n    setAppId(app._id);\n    confirmAlert({\n      title: `Eliminar ${app.name}`,\n      message: `Esta seguro que desea eliminar el setting de ${app.name}?`,\n      buttons: [\n        {\n          label: t(\"yes\"),\n          onClick: () => handleArchivedConfirm(app),\n        },\n        {\n          label: t(\"no\"),\n          onClick: () => {},\n        },\n      ],\n    });\n  };\n\n  const handleActiveConfirm = (app) => {\n    activeApp(\n      {\n        app,\n      },\n      {\n        onSuccess: (response) => {\n          refetch();\n          showGlobalNotification(\"success\", t(\"inHorabuena\"), t(\"successfulProcess\"));\n        },\n        onError: () => showGlobalNotification(\"error\", t(\"errorTitle\"), t(\"errorDescription\")),\n        onFinally: () => {},\n      }\n    );\n  };\n\n  const handleActive = (app) => {\n    setAppId(app._id);\n    confirmAlert({\n      title: app.active ? `Desactivar la ${t(\"application\")}` : `Activar la ${t(\"application\")}`,\n      message: \"Esta seguro que desea continuar?\",\n      buttons: [\n        {\n          label: t(\"yes\"),\n          onClick: () => handleActiveConfirm(app),\n        },\n        {\n          label: t(\"no\"),\n          onClick: () => {},\n        },\n      ],\n    });\n  };\n\n  return (\n    <>\n      {page === globals.PAGE_MAIN && (\n        <div>\n          {!isEmbed && (\n            <AppsHeader\n              t={t}\n              primaryAction={\n                <AddUserButton\n                  isOpenManageAppsModal={isOpenManageAppsModal}\n                  openManageAppsModal={openManageAppsModal}\n                  t={t}\n                />\n              }\n            />\n          )}\n          <ActionBar t={t} {...commonProps} options={{ actions: apps?.length > 0 && ActionsUsers }}>\n            <SearchAppsForm {...commonProps} refetch={refetch} t={t} />\n          </ActionBar>\n          <AppsTable\n            {...commonProps}\n            apps={apps}\n            pagination={pagination}\n            setPagination={setPagination}\n            loading={loading}\n            refetch={refetch}\n            setPage={setPage}\n            setSelectedApp={setSelectedApp}\n            selectedApp={selectedApp}\n            handleDetails={handleDetails}\n            handleEdit={handleEdit}\n            details={handleDetails}\n            handleArchived={handleArchived}\n            handleActive={handleActive}\n            handleAddTrans={handleAddTrans}\n            t={t}\n          />\n        </div>\n      )}\n      {page === globals.PAGE_ONE && (\n        <div>\n          <AppHeader\n            setPage={setPage}\n            selectedApp={selectedApp}\n            handleDetails={handleDetails}\n            handleEdit={handleEdit}\n            setSubpage={setSubpage}\n            handleArchived={handleArchived}\n            t={t}\n          />\n          {subpage === numbers.ONE && (\n            <div style={{ padding: 20 }}>\n              <TransContainer isEmbed=\"true\" appId={appId} />\n            </div>\n          )}\n          {subpage === numbers.TWO && (\n            <div style={{ padding: 20 }}>\n              <h2> Acerca de los eventos </h2>\n            </div>\n          )}\n          {subpage === numbers.THREE && (\n            <div style={{ padding: 20 }}>\n              <InfoPack selectedApp={selectedApp} />\n            </div>\n          )}\n          {subpage === numbers.FOUR && (\n            <div style={{ padding: 20 }}>\n              <InfoRoot selectedApp={selectedApp} />\n            </div>\n          )}\n        </div>\n      )}\n      <ManageAppModal2\n        refetch={refetch}\n        appId={appId}\n        setAppId={setAppId}\n        closeModal={closeManageAppsModal}\n        openModal={isOpenManageAppsModal}\n        t={t}\n      />\n      <ManageTransModal\n        refetch={refetch}\n        closeModal={closeManageTranssModal}\n        openModal={isOpenManageTranssModal}\n        initialValues={initialValues}\n        session={sessionStoreRedux.currentSession}\n        selectedApp={selectedApp}\n        t={t}\n      />\n    </>\n  );\n};\n\nexport default Apps;\n"]},"metadata":{},"sourceType":"module"}