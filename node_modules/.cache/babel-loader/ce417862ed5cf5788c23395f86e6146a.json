{"ast":null,"code":"var _jsxFileName = \"/Users/kometsales/Documents/heyo-slack/src/features/trans/containers/Trans.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { confirmAlert } from \"react-confirm-alert\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport ActionBar from \"../../shared/components/ActionBar\";\nimport TranssTable from \"../components/TranssTable\";\nimport SearchTranssForm from \"../components/SearchTransForm\";\nimport ActionsUsers from \"../components/ActionsTrans\";\nimport ManageTransModal2 from \"../components/ManageTransModal2\";\nimport DetailsTransModal from \"../components/DetailsTransModal\";\nimport AddUserButton from \"../components/AddTransButton\";\nimport TranssHeader from \"../components/TranssHeader\"; // HELPERS\n\nimport showGlobalNotification from \"../../../helpers/showGlobalNotification\"; // REDUX\n\nimport { setTrans, setTransRedux } from \"../../../redux/trans\"; // REQUEST\n\nimport { getTrans, archivedTrans, activeTrans } from \"../requests\"; // HOOKS\n\nimport useTranss from \"../hooks/useTranss\";\nimport useModal from \"../../shared/hooks/useModal\"; // CONTAINERS\n\nimport AppsTable from \"../../apps/containers/AppsTable\"; // CONSTANTS\n\nimport { globals, numbers } from \"../../../constants/globals\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Transs = ({\n  isEmbed = false,\n  appId = null,\n  planId = null,\n  userId = null\n}) => {\n  _s();\n\n  const dispatch = useDispatch();\n  const sessionStoreRedux = useSelector(store => store.session);\n  const {\n    t,\n    i18n\n  } = useTranslation();\n  const {\n    transs,\n    filters,\n    setFilters,\n    pagination,\n    setPagination,\n    loading,\n    refetch\n  } = useTranss(appId, planId, userId);\n  const commonProps = {\n    filters,\n    setFilters\n  };\n  const [page, setPage] = useState(globals.PAGE_MAIN);\n  const [subpage, setSubpage] = useState(numbers.ONE);\n  const [selectedTrans, setSelectedTrans] = useState({});\n  const [transId, setTransId] = useState(null);\n  const [isOpenManageTranssModal, openManageTranssModal, closeManageTranssModal] = useModal();\n  const [isOpenDetailsTransModal, openDetailsTransModal, closeDetailsTransModal] = useModal();\n  const [initialValues, setInitialValues] = useState({\n    mode: \"Efectivo\",\n    fullname: \"\",\n    email: \"\",\n    phone: \"\",\n    amount: 0,\n    pending: 0,\n    total: 0,\n    appId: \"\"\n  });\n  useEffect(() => {\n    setTrans(selectedTrans)(dispatch);\n  }, [selectedTrans]);\n\n  const handleEdit = trans => {\n    setSelectedTrans(trans);\n    setTransId(trans._id);\n    openManageTranssModal();\n  };\n\n  const handleDetails = trans => {\n    getTrans(trans._id, {\n      onSuccess: response => {\n        setTransRedux(response.result);\n        setSelectedTrans(response.result);\n        openDetailsTransModal();\n      },\n      onError: () => showGlobalNotification(\"error\", t(\"errorTitle\"), t(\"errorDescription\"))\n    });\n  };\n\n  const handleArchivedConfirm = trans => {\n    archivedTrans({\n      trans\n    }, {\n      onSuccess: response => {\n        refetch();\n        showGlobalNotification(\"success\", t(\"inHorabuena\"), t(\"successfulProcess\"));\n      },\n      onError: () => showGlobalNotification(\"error\", t(\"errorTitle\"), t(\"errorDescription\")),\n      onFinally: () => {}\n    });\n  };\n\n  const handleArchived = trans => {\n    setTransId(trans._id);\n    confirmAlert({\n      title: `Eliminar ${trans.description} por ${trans.amount}`,\n      message: `Esta seguro que desea eliminar el setting de ${trans.description}?`,\n      buttons: [{\n        label: t(\"yes\"),\n        onClick: () => handleArchivedConfirm(trans)\n      }, {\n        label: t(\"no\"),\n        onClick: () => {}\n      }]\n    });\n  };\n\n  const handleReverseConfirm = trans => {\n    activeTrans({\n      trans\n    }, {\n      onSuccess: () => {\n        refetch();\n        showGlobalNotification(\"success\", t(\"inHorabuena\"), t(\"successfulProcess\"));\n      },\n      onError: () => showGlobalNotification(\"error\", t(\"errorTitle\"), t(\"errorDescription\")),\n      onFinally: () => {}\n    });\n  };\n\n  const handleReverse = trans => {\n    setTransId(trans._id);\n    confirmAlert({\n      title: \"Desea reversar el Pago\",\n      buttons: [{\n        label: t(\"yes\"),\n        onClick: () => handleReverseConfirm(trans)\n      }, {\n        label: t(\"no\"),\n        onClick: () => {}\n      }]\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [page === globals.PAGE_MAIN && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [!isEmbed && /*#__PURE__*/_jsxDEV(TranssHeader, {\n        t: t,\n        primaryAction: /*#__PURE__*/_jsxDEV(AddUserButton, {\n          isOpenManageTranssModal: isOpenManageTranssModal,\n          openManageTranssModal: openManageTranssModal\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(ActionBar, { ...commonProps,\n        options: {\n          actions: (transs === null || transs === void 0 ? void 0 : transs.length) > 0 && ActionsUsers\n        },\n        children: /*#__PURE__*/_jsxDEV(SearchTranssForm, { ...commonProps,\n          refetch: refetch\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(TranssTable, { ...commonProps,\n        transs: transs,\n        pagination: pagination,\n        setPagination: setPagination,\n        loading: loading,\n        refetch: refetch,\n        initialValues: initialValues,\n        setPage: setPage,\n        setSelectedTrans: setSelectedTrans,\n        selectedTrans: selectedTrans,\n        handleDetails: handleDetails,\n        handleEdit: handleEdit,\n        details: handleDetails,\n        handleArchived: handleArchived,\n        handleReverse: handleReverse,\n        openDetailsTransModal: openDetailsTransModal,\n        t: t\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(ManageTransModal2, {\n      refetch: refetch,\n      transId: transId,\n      setTransId: setTransId,\n      closeModal: closeManageTranssModal,\n      openModal: isOpenManageTranssModal,\n      t: t\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DetailsTransModal, {\n      refetch: refetch,\n      transId: transId,\n      setTransId: setTransId,\n      closeModal: closeDetailsTransModal,\n      openModal: isOpenDetailsTransModal,\n      initialValues: initialValues,\n      transs: transs,\n      selectedTransMain: selectedTrans,\n      setSelectedTransMain: setSelectedTrans,\n      setTrans: setTrans,\n      getTrans: getTrans,\n      session: sessionStoreRedux.currentSession\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Transs, \"bzlhqQv7wFS4Doqzy2MhDPvKNcs=\", false, function () {\n  return [useDispatch, useSelector, useTranslation, useTranss, useModal, useModal];\n});\n\n_c = Transs;\nexport default Transs;\n\nvar _c;\n\n$RefreshReg$(_c, \"Transs\");","map":{"version":3,"sources":["/Users/kometsales/Documents/heyo-slack/src/features/trans/containers/Trans.js"],"names":["useState","useEffect","useTranslation","confirmAlert","useDispatch","useSelector","ActionBar","TranssTable","SearchTranssForm","ActionsUsers","ManageTransModal2","DetailsTransModal","AddUserButton","TranssHeader","showGlobalNotification","setTrans","setTransRedux","getTrans","archivedTrans","activeTrans","useTranss","useModal","AppsTable","globals","numbers","Transs","isEmbed","appId","planId","userId","dispatch","sessionStoreRedux","store","session","t","i18n","transs","filters","setFilters","pagination","setPagination","loading","refetch","commonProps","page","setPage","PAGE_MAIN","subpage","setSubpage","ONE","selectedTrans","setSelectedTrans","transId","setTransId","isOpenManageTranssModal","openManageTranssModal","closeManageTranssModal","isOpenDetailsTransModal","openDetailsTransModal","closeDetailsTransModal","initialValues","setInitialValues","mode","fullname","email","phone","amount","pending","total","handleEdit","trans","_id","handleDetails","onSuccess","response","result","onError","handleArchivedConfirm","onFinally","handleArchived","title","description","message","buttons","label","onClick","handleReverseConfirm","handleReverse","actions","length","currentSession"],"mappings":"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","sourcesContent":["import { useState, useEffect } from \"react\";\nimport { useTranslation } from \"react-i18next\";\n\nimport { confirmAlert } from \"react-confirm-alert\";\nimport { useDispatch, useSelector } from \"react-redux\";\n\nimport ActionBar from \"../../shared/components/ActionBar\";\nimport TranssTable from \"../components/TranssTable\";\nimport SearchTranssForm from \"../components/SearchTransForm\";\nimport ActionsUsers from \"../components/ActionsTrans\";\nimport ManageTransModal2 from \"../components/ManageTransModal2\";\nimport DetailsTransModal from \"../components/DetailsTransModal\";\nimport AddUserButton from \"../components/AddTransButton\";\nimport TranssHeader from \"../components/TranssHeader\";\n\n// HELPERS\nimport showGlobalNotification from \"../../../helpers/showGlobalNotification\";\n\n// REDUX\nimport { setTrans, setTransRedux } from \"../../../redux/trans\";\n\n// REQUEST\nimport { getTrans, archivedTrans, activeTrans } from \"../requests\";\n\n// HOOKS\nimport useTranss from \"../hooks/useTranss\";\nimport useModal from \"../../shared/hooks/useModal\";\n\n// CONTAINERS\nimport AppsTable from \"../../apps/containers/AppsTable\";\n\n// CONSTANTS\nimport { globals, numbers } from \"../../../constants/globals\";\n\nconst Transs = ({ isEmbed = false, appId = null, planId = null, userId = null }) => {\n  const dispatch = useDispatch();\n  const sessionStoreRedux = useSelector((store) => store.session);\n  const { t, i18n } = useTranslation();\n\n  const { transs, filters, setFilters, pagination, setPagination, loading, refetch } = useTranss(appId, planId, userId);\n\n  const commonProps = { filters, setFilters };\n  const [page, setPage] = useState(globals.PAGE_MAIN);\n  const [subpage, setSubpage] = useState(numbers.ONE);\n  const [selectedTrans, setSelectedTrans] = useState({});\n\n  const [transId, setTransId] = useState(null);\n  const [isOpenManageTranssModal, openManageTranssModal, closeManageTranssModal] = useModal();\n\n  const [isOpenDetailsTransModal, openDetailsTransModal, closeDetailsTransModal] = useModal();\n\n  const [initialValues, setInitialValues] = useState({\n    mode: \"Efectivo\",\n    fullname: \"\",\n    email: \"\",\n    phone: \"\",\n    amount: 0,\n    pending: 0,\n    total: 0,\n    appId: \"\",\n  });\n\n  useEffect(() => {\n    setTrans(selectedTrans)(dispatch);\n  }, [selectedTrans]);\n\n  const handleEdit = (trans) => {\n    setSelectedTrans(trans);\n    setTransId(trans._id);\n    openManageTranssModal();\n  };\n\n  const handleDetails = (trans) => {\n    getTrans(trans._id, {\n      onSuccess: (response) => {\n        setTransRedux(response.result);\n        setSelectedTrans(response.result);\n        openDetailsTransModal();\n      },\n      onError: () => showGlobalNotification(\"error\", t(\"errorTitle\"), t(\"errorDescription\")),\n    });\n  };\n\n  const handleArchivedConfirm = (trans) => {\n    archivedTrans(\n      {\n        trans,\n      },\n      {\n        onSuccess: (response) => {\n          refetch();\n          showGlobalNotification(\"success\", t(\"inHorabuena\"), t(\"successfulProcess\"));\n        },\n        onError: () => showGlobalNotification(\"error\", t(\"errorTitle\"), t(\"errorDescription\")),\n        onFinally: () => {},\n      }\n    );\n  };\n\n  const handleArchived = (trans) => {\n    setTransId(trans._id);\n    confirmAlert({\n      title: `Eliminar ${trans.description} por ${trans.amount}`,\n      message: `Esta seguro que desea eliminar el setting de ${trans.description}?`,\n      buttons: [\n        {\n          label: t(\"yes\"),\n          onClick: () => handleArchivedConfirm(trans),\n        },\n        {\n          label: t(\"no\"),\n          onClick: () => {},\n        },\n      ],\n    });\n  };\n\n  const handleReverseConfirm = (trans) => {\n    activeTrans(\n      {\n        trans,\n      },\n      {\n        onSuccess: () => {\n          refetch();\n          showGlobalNotification(\"success\", t(\"inHorabuena\"), t(\"successfulProcess\"));\n        },\n        onError: () => showGlobalNotification(\"error\", t(\"errorTitle\"), t(\"errorDescription\")),\n        onFinally: () => {},\n      }\n    );\n  };\n\n  const handleReverse = (trans) => {\n    setTransId(trans._id);\n    confirmAlert({\n      title: \"Desea reversar el Pago\",\n      buttons: [\n        {\n          label: t(\"yes\"),\n          onClick: () => handleReverseConfirm(trans),\n        },\n        {\n          label: t(\"no\"),\n          onClick: () => {},\n        },\n      ],\n    });\n  };\n\n  return (\n    <>\n      {page === globals.PAGE_MAIN && (\n        <div>\n          {!isEmbed && (\n            <TranssHeader\n              t={t}\n              primaryAction={\n                <AddUserButton\n                  isOpenManageTranssModal={isOpenManageTranssModal}\n                  openManageTranssModal={openManageTranssModal}\n                />\n              }\n            />\n          )}\n          <ActionBar {...commonProps} options={{ actions: transs?.length > 0 && ActionsUsers }}>\n            <SearchTranssForm {...commonProps} refetch={refetch} />\n          </ActionBar>\n          <TranssTable\n            {...commonProps}\n            transs={transs}\n            pagination={pagination}\n            setPagination={setPagination}\n            loading={loading}\n            refetch={refetch}\n            initialValues={initialValues}\n            setPage={setPage}\n            setSelectedTrans={setSelectedTrans}\n            selectedTrans={selectedTrans}\n            handleDetails={handleDetails}\n            handleEdit={handleEdit}\n            details={handleDetails}\n            handleArchived={handleArchived}\n            handleReverse={handleReverse}\n            openDetailsTransModal={openDetailsTransModal}\n            t={t}\n          />\n        </div>\n      )}\n\n      <ManageTransModal2\n        refetch={refetch}\n        transId={transId}\n        setTransId={setTransId}\n        closeModal={closeManageTranssModal}\n        openModal={isOpenManageTranssModal}\n        t={t}\n      />\n      <DetailsTransModal\n        refetch={refetch}\n        transId={transId}\n        setTransId={setTransId}\n        closeModal={closeDetailsTransModal}\n        openModal={isOpenDetailsTransModal}\n        initialValues={initialValues}\n        transs={transs}\n        selectedTransMain={selectedTrans}\n        setSelectedTransMain={setSelectedTrans}\n        setTrans={setTrans}\n        getTrans={getTrans}\n        session={sessionStoreRedux.currentSession}\n      />\n    </>\n  );\n};\n\nexport default Transs;\n"]},"metadata":{},"sourceType":"module"}